<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000ec5b-dce3-8000-e69f-01ef9001ef90_10118444</versionUuid>
    <interface>
        <name>SCDO_detallesCargaMasivaDoc</name>
        <uuid>_a-0000e9a7-6d42-8000-e63f-01ef9001ef90_5937825</uuid>
        <description>Interfaz que muestra los detalles de la carga masiva de documentación en los reportes</description>
        <parentUuid>_a-0000e801-560f-8000-e5d9-01ef9001ef90_1707049</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>#"SYSTEM_SYSRULES_columnsLayout"(
  columns: {
    #"SYSTEM_SYSRULES_columnLayout"(
      contents: {
        #"SYSTEM_SYSRULES_richTextDisplayField"(
          labelPosition: "COLLAPSED",
          value: {
            #"SYSTEM_SYSRULES_richTextItem_v1"(
              text: { "Carga de Documentación" },
              color: "#ff0000",
              size: "MEDIUM_PLUS",
              style: { "STRONG" }
            )
          },
          align: "CENTER"
        ),
        #"SYSTEM_SYSRULES_boxLayout"(
          label: "Resultados de la Carga Masiva de Documentación",
          contents: {
            #"SYSTEM_SYSRULES_cardLayout"(
              contents: {
                #"SYSTEM_SYSRULES_sideBySideLayout"(
                  items: {
                    #"SYSTEM_SYSRULES_sideBySideItem"(
                      item: #"SYSTEM_SYSRULES_richTextDisplayField"(
                        labelPosition: "COLLAPSED",
                        value: {
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            icon: "check-circle",
                            color: "NEGATIVE",
                            size: "MEDIUM"
                          )
                        }
                      ),
                      width: "MINIMIZE"
                    ),
                    #"SYSTEM_SYSRULES_sideBySideItem"(
                      item: #"SYSTEM_SYSRULES_richTextDisplayField"(
                        labelPosition: "COLLAPSED",
                        value: {
                          #"SYSTEM_SYSRULES_richTextItem_v1"(
                            text: { "DETALLE DEL ARCHIVO CARGADO." },
                            style: { "STRONG", "UNDERLINE" }
                          ),
                          char(10),
                          if(
                            a!isNullOrEmpty(ri!documento),
                            "Se agregó el adf con número ",
                            "Se agregó el documento ",
                            
                          ),
                          if(
                            a!isNullOrEmpty(ri!documento),
                            ri!adf,
                            #"SYSTEM_SYSRULES_richTextItem_v1"(
                              text: document(
                                documentId: ri!documento,
                                property: "name"
                              ),
                              link: #"SYSTEM_SYSRULES_documentDownloadLink"(
                                label: document(
                                  documentId: ri!documento,
                                  property: "name"
                                ),
                                document: ri!documento
                              )
                            )
                          ),
                          " a las siguientes operaciones:",
                          char(10),
                          "Total de operaciones en el Excel: ",
                          #"SYSTEM_SYSRULES_richTextItem_v1"(
                            text: if(
                              a!isNullOrEmpty(ri!totalCount),
                              0,
                              ri!totalCount - 1
                            ),
                            style: { "STRONG" }
                          ),
                          char(10),
                          "Total de Operaciones Correctas: ",
                          #"SYSTEM_SYSRULES_richTextItem_v1"(
                            text: if(
                              and(a!isNullOrEmpty(ri!reportes),a!isNullOrEmpty(ri!reportesAprobados), 
                              a!isNullOrEmpty(ri!contratos)
                              ),
                              0,
                              if(and(a!isNullOrEmpty(ri!reportes),a!isNullOrEmpty(ri!reportesAprobados),
                              a!isNotNullOrEmpty(ri!contratos)),
                              length(ri!contratos),
                              length(ri!reportes) + length(ri!reportesAprobados)
                            )),
                            style: { "STRONG" }
                          ),
                          char(10),
                          "Erróneos: ",
                          #"SYSTEM_SYSRULES_richTextItem_v1"(
                            text: if(
                              and(isnull(ri!reportes) ,a!isNullOrEmpty(ri!reportesAprobados), 
                              a!isNullOrEmpty(ri!contratos)),
                              if(
                                a!isNullOrEmpty(ri!totalCount),
                                0,
                                ri!totalCount - 1
                              ),
                             if(a!isNotNullOrEmpty(ri!contratos),
                             if(
                               ( (ri!totalCount - 1) - (
                                 length(ri!contratos)
                               ))&lt;0,
                               0,
                               ( (ri!totalCount - 1) - (
                                 length(ri!contratos) 
                               ))
                             ),
                              if(
                                ( (ri!totalCount - 1) - (
                                  length(ri!reportes) + length(ri!reportesAprobados)
                                ))&lt;0,
                                0,
                                ( (ri!totalCount - 1) - (
                                  length(ri!reportes) + length(ri!reportesAprobados) 
                                ))
                              ))
                              /*(ri!totalCount - 1) - (*/
                                /*length(ri!reportes) + length(ri!reportesAprobados)*/
                              /*)*/
                            ),
                            style: { "STRONG" }
                          ),
                          char(10),
                          
                        }
                      )
                    )
                  },
                  alignVertical: "MIDDLE",
                  spacing: "STANDARD"
                ),
                #"SYSTEM_SYSRULES_gridField_v1"(
                  label: "Detalles de las operaciones a las cuáles se le agregó el documento: ",
                  labelPosition: "ABOVE",
                  emptyGridMessage: "No se encontraron reportes en el archivo subido, pruebe con otro",
                  data: ri!reportes,
                  /*pagingSaveInto: local!pagingInfo,*/
                  columns: {
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Mercado", value: fv!row.mercado),
                    #"SYSTEM_SYSRULES_gridColumn"(
                      label: "Operación",
                      value: fv!row.operacion
                    ),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Contrato", value: fv!row.contrato),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Nombre", value: a!match(
                      value: index(
                        decrypttext(
                          valueToDecrypt: index(fv!row, "nombre", null),
                          iv: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021470",
                          scsKey: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021476"
                        ),
                        "success",
                        null
                      ),
                      equals: true,
                      then: index(
                        decrypttext( valueToDecrypt:
                        index(fv!row, "nombre", null),
                        iv: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021470",
                        scsKey: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021476"
                        ),
                        "value",
                        null
                      ),
                      equals: false,
                      then: index(fv!row, "nombre", null),
                      default: "Sin nombre"
                    )),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Emisora", value: fv!row.emisora),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Monto", value: fv!row.monto),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Promotor", value: fv!row.promotor),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "ccostos", value: fv!row.ccostos),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Usuario", value: fv!row.usuario),
                    #"SYSTEM_SYSRULES_gridColumn"(
                      label: "F.Captura",
                      value: fv!row.fechacaptura
                    ),
                    #"SYSTEM_SYSRULES_gridColumn"(
                      label: "H.Captura",
                      value: fv!row.horacaptura
                    ),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Bitacora", value: fv!row.bitacora),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Riesgo", value: fv!row.riesgo),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Revisado", value: fv!row.revisado),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "extra4", value: fv!row.extra4),
                    #"SYSTEM_SYSRULES_gridColumn"(
                      label: "Obligatorio",
                      value: fv!row.obligatorio
                    ),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Titulo", value: fv!row.titulo)
                  },
                  showWhen: a!isNotNullOrEmpty(ri!reportes)
                ),
                #"SYSTEM_SYSRULES_gridField_v1"(
                  label: "Detalles de las operaciones aprobadas a las cuáles se le agregó el documento: ",
                  labelPosition: "ABOVE",
                  emptyGridMessage: "No se encontraron reportes en el archivo subido, pruebe con otro",
                  data: ri!reportesAprobados,
                  /*pagingSaveInto: local!pagingInfo,*/
                  columns: {
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Mercado", value: fv!row.mercado),
                    #"SYSTEM_SYSRULES_gridColumn"(
                      label: "Operación",
                      value: fv!row.operacion
                    ),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Contrato", value: fv!row.contrato),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Nombre", value:  a!match(
                      value: index(
                        decrypttext(
                          valueToDecrypt: index(fv!row, "nombre", null),
                          iv: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021470",
                          scsKey: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021476"
                        ),
                        "success",
                        null
                      ),
                      equals: true,
                      then: index(
                        decrypttext( valueToDecrypt:
                        index(fv!row, "nombre", null),
                        iv: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021470",
                        scsKey: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021476"
                        ),
                        "value",
                        null
                      ),
                      equals: false,
                      then: index(fv!row, "nombre", null),
                      default: "luis"
                    )),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Emisora", value: fv!row.emisora),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Monto", value: fv!row.monto),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Promotor", value: fv!row.promotor),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "ccostos", value: fv!row.ccostos),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Usuario", value: fv!row.usuario),
                    #"SYSTEM_SYSRULES_gridColumn"(
                      label: "F.Captura",
                      value: fv!row.fechacaptura
                    ),
                    #"SYSTEM_SYSRULES_gridColumn"(
                      label: "H.Captura",
                      value: fv!row.horacaptura
                    ),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Bitacora", value: fv!row.bitacora),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Riesgo", value: fv!row.riesgo),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Revisado", value: fv!row.revisado),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "extra4", value: fv!row.extra4),
                    #"SYSTEM_SYSRULES_gridColumn"(
                      label: "Obligatorio",
                      value: fv!row.obligatorio
                    ),
                    #"SYSTEM_SYSRULES_gridColumn"(label: "Titulo", value: fv!row.titulo)
                  },
                  showWhen: a!isNotNullOrEmpty(ri!reportesAprobados)
                ),
                #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                  buttons: {
                    #"SYSTEM_SYSRULES_ButtonWidget"(
                      label: "ACEPTAR ",
                      icon: "check",
                      saveInto: {
                        /*a!save(ri!OKEY,true*/
                        /*),*/
                        
                      },
                      submit: true,
                      style: "PRIMARY",
                      validationGroup: "Archivo_no_valido"
                    )
                  },
                  align: "CENTER"
                ),
                
              },
              /*style: cons!SCDO_COLOR_ROJO_SANTANDER,*/
              marginBelow: "STANDARD",
              showBorder: false,
              style: "STANDARD"/*showWhen:if(and(a!isNullOrEmpty(local!folder),a!isNullOrEmpty(local!TXTcount)),*/
              /*{},*/
              /*true)*/
              
            ),
            
          },
          style: #"_a-0000e867-3fd5-8000-e5e3-01ef9001ef90_1882453",
          marginBelow: "STANDARD",
          
        ),
        
      },
      width: "AUTO"
    ),
    
  }
)</definition>
        <namedTypedValue>
            <name>reportes</name>
            <type>
                <name>cdo_reportes?list</name>
                <namespace>urn:com:appian:types</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>reportesAprobados</name>
            <type>
                <name>cdo_reportes_aprobados?list</name>
                <namespace>urn:com:appian:types</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>documento</name>
            <type>
                <name>CollaborationDocument</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>adf</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>totalCount</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>contratos</name>
            <type>
                <name>V_CDO_DOCONTRATO_ULTIMO?list</name>
                <namespace>urn:com:appian:types</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <history>
        <historyInfo versionUuid="_a-0000ea22-4ef8-8000-e643-01ef9001ef90_6778374"/>
        <historyInfo versionUuid="_a-0000eaa5-8248-8000-e681-01ef9001ef90_8232481"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9388223"/>
        <historyInfo versionUuid="_a-0000ec5b-dce3-8000-e69f-01ef9001ef90_10118444"/>
    </history>
</contentHaul>
