<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000ec5b-dce3-8000-e69f-01ef9001ef90_10119036</versionUuid>
    <interface>
        <name>SCDO_GridSupervisores</name>
        <uuid>_a-0000e878-569a-8000-e5e4-01ef9001ef90_2226561</uuid>
        <description>Interfaz con la tabla para los supervisores para SCDO.</description>
        <parentUuid>_a-0000e801-560f-8000-e5d9-01ef9001ef90_1707049</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  /*------------*/
  local!showInformationBanner: true,
  local!showInformationBanner_actualizar: true,
  local!showInformationBanner_eliminar: true,
  /*correcto*/
  local!flag: now(),
  local!showWhen: a!refreshVariable(
    value: now() &lt; local!flag,
    refreshInterval: 0.5
  ),
  /*-----*/
  /*error*/
  local!flag_error: now(),
  local!showWhen_error: a!refreshVariable(
    value: now() &lt; local!flag_error,
    /* especifique el intervalo después de cuántos minutos desea finalizar el examen */
    refreshInterval: 0.5
  ),
  /*------*/
  /*correcto_actualizar*/
  local!flag_actualizar: now(),
  local!showWhen_actualizar: a!refreshVariable(
    value: now() &lt; local!flag_actualizar,
    refreshInterval: 0.5
  ),
  /*-----*/
  /*error_actualizasr*/
  local!flag_error_actualizar: now(),
  local!showWhen_error_actualizar: a!refreshVariable(
    value: now() &lt; local!flag_error_actualizar,
    /* especifique el intervalo después de cuántos minutos desea finalizar el examen */
    refreshInterval: 0.5
  ),
  /*------*/
  /*correcto_eliminar*/
  local!flag_eliminar: now(),
  local!showWhen_eliminar: a!refreshVariable(
    value: now() &lt; local!flag_eliminar,
    refreshInterval: 0.5
  ),
  /*-----*/
  /*error_elimianr*/
  local!flag_error_eliminar: now(),
  local!showWhen_error_eliminar: a!refreshVariable(
    value: now() &lt; local!flag_error_eliminar,
    /* especifique el intervalo después de cuántos minutos desea finalizar el examen */
    refreshInterval: 0.5
  ),
  /*------*/
  /*------------*/
  local!criterio,
  local!criterioT,
  local!succes,
  local!editGrid,
  local!buscarTipo,
  /*Para Dropdowns de expediente */
  local!cdt_expediente: a!refreshVariable(
    value: index(
      #"SYSTEM_SYSRULES_queryEntity_v2"(
        entity: #"_a-0000e8b3-d748-8000-e5f3-01ef9001ef90_2402150",
        query: #"SYSTEM_SYSRULES_query"(
          logicalexpression: {
            #"SYSTEM_SYSRULES_queryLogicalExpression"(
              operator: "OR",
              filters: {
                #"SYSTEM_SYSRULES_queryFilter"(
                  field: "tipo",
                  operator: "=",
                  value: "revisor"
                ),
                #"SYSTEM_SYSRULES_queryFilter"(
                  field: "tipo",
                  operator: "=",
                  value: "supervisor"
                )
              }
            )
          },
          paginginfo: #"SYSTEM_SYSRULES_pagingInfo"(
            startIndex: 1,
            batchSize: 4999,
            sort: #"SYSTEM_SYSRULES_sortInfo"(field: "idadmon", ascending: false)
          )
        ),
        fetchtotalcount: true
      ),
      "data",
      null
    ),
    /*refreshAlways: true,*/
    refreshOnVarChange: ri!refreshCount
  ),
  /*Para dropdowns de segmento  */
  local!cdt_segmento: a!refreshVariable(
    value: index(
      #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2233353"(idSegmento: null),
      "data",
      null
    ),
    /*refreshAlways: true*/
    refreshOnVarChange: ri!refreshCount
  ),
  /*Para Grid  */
  local!colorEdit: "#0032E6",
  local!colorDV: "#EC0000",
  local!colorDiscardChanges: "#111111",
  local!colorSave: "#1F8926",
  local!segmentoUsuarioSeleccionado,
  local!startIndex: 1,
  local!batchSize: 5,
  local!segmentosUsuarios: a!refreshVariable(
    value: #"f3aebc37-a285-48ce-a743-6533738f57b9"(
      criterio: local!criterio,
      startIndex: local!startIndex,
      batchSize: local!batchSize,
      tipo: local!buscarTipo,
      refreshCount: ri!refreshCount
    ),
    /*refreshAlways: true,*/
    refreshOnReferencedVarChange: false(),
    refreshOnVarChange: {
      ri!refreshCount,
      local!criterio,
      local!buscarTipo
    }
  ),
  local!segmentoUsuarioEditar: if(
    a!isNotNullOrEmpty(local!segmentosUsuarios),
    #"SYSTEM_SYSRULES_forEach"(
      items: index(local!segmentosUsuarios, "data", null),
      expression: 'type!{urn:com:appian:types}cdo_segmentosusuario'(
        idsegusuario: index(fv!item,"idsegusuario", null),
        idadmon: index(fv!item,"idadmon", null),
        idsegmento: index(fv!item,"idsegmento", null)
      )
    ),
    null
  ),
  local!existeSupervisorSegmento: if(
    and(
      a!isNotNullOrEmpty(ri!idadmon),
      a!isNotNullOrEmpty(ri!idsegmento)
    ),
    a!isNotNullOrEmpty(
      index(
        #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4555231"(
          idadmon: ri!idadmon,
          idsegmento: ri!idsegmento
        ),
        "data",
        null
      )
    ),
    false
  ),
  local!existeSupervisorSegmentoTabla: if(
    or(
      a!isNullOrEmpty(local!segmentoUsuarioSeleccionado),
      a!isNullOrEmpty(local!editGrid)
    ),
    false,
    if(
      local!segmentoUsuarioSeleccionado = local!segmentoUsuarioEditar[local!editGrid],
      false,
      a!isNotNullOrEmpty(
        index(
          #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4555231"(
            idadmon: index(local!segmentoUsuarioEditar[local!editGrid],"idadmon", null),
            idsegmento: index(local!segmentoUsuarioEditar[local!editGrid],"idsegmento",null)
          ),
          "data",
          null
        )
      )
    )
  ),
  local!idadmon,
  local!indexEliminar,
  local!mostrarSuccess: false,
  local!mostrarEliminar: false,
  local!usuarioSeleccionado,
  local!segmentoSeleccionadoNuevo,
  {
    #"SYSTEM_SYSRULES_boxLayout"(
      label: "Agregar Acceso a Supervisor",
      contents: {
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            /*ERROR*/
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394317"(
                  showInformationBanner: local!showInformationBanner
                )
              },
              showWhen: and(
                local!showInformationBanner,
                local!showWhen_error
              )
            ),
            
          }
        ),
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: {
            #"SYSTEM_SYSRULES_ButtonArrayLayout"(
              buttons: {
                #"SYSTEM_SYSRULES_ButtonWidget"(
                  icon: "refresh",
                  /*tooltip: "Actualizar Tabla",*/
                  saveInto: a!save(ri!refreshCount, ri!refreshCount + 1),
                  size: "SMALL",
                  style: "SECONDARY",
                  loadingIndicator: true
                )
              },
              align: "START"
            )
          },
          width: "EXTRA_NARROW"
        ),
        #"SYSTEM_SYSRULES_sideBySideLayout"(
          items: {
            #"SYSTEM_SYSRULES_sideBySideItem"(
              item: #"SYSTEM_SYSRULES_dropdownField_v1"(
                label: "Usuario:",
                labelPosition: "ABOVE",
                placeholder: "--- Seleccione un usuario---",
                choiceLabels: index(local!cdt_expediente, "nombre", {}),
                choiceValues: index(local!cdt_expediente, "idadmon", {}),
                value: ri!idadmon,
                saveInto: ri!idadmon,
                searchDisplay: "AUTO",
                validations: {}
              )
            ),
            #"SYSTEM_SYSRULES_sideBySideItem"(
              item: #"SYSTEM_SYSRULES_dropdownField_v1"(
                label: "Segmento:",
                labelPosition: "ABOVE",
                placeholder: "--- Seleccione un segmento ---",
                choiceLabels: index(local!cdt_segmento, "segmento", {}),
                choiceValues: index(local!cdt_segmento, "idsegmento", {}),
                value: ri!idsegmento,
                saveInto: ri!idsegmento,
                searchDisplay: "AUTO",
                validations: {}
              )
            ),
            #"SYSTEM_SYSRULES_sideBySideItem"(
              item: #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                buttons: {
                  #"SYSTEM_SYSRULES_ButtonWidget"(
                    label: "Agregar",
                    icon: "file-invoice",
                    saveInto: {
                      #"SYSTEM_SYSRULES_startProcess"(
                        processModel: #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4601466",
                        processParameters: {
                          admin: ri!idadmon,
                          idsegmento: ri!idsegmento
                        },
                        onSuccess: {
                          a!save(local!showInformationBanner, true),
                          if(
                            toboolean(fv!processInfo.pv.error) = false,
                            {
                              a!save(local!flag, addseconds(now(), 10)),
                              a!save(
                                local!usuarioSeleccionado,
                                index(
                                  #"_a-0000e8b3-d748-8000-e5f3-01ef9001ef90_2402181"(idAdmon: ri!idadmon),
                                  "data",
                                  "usuario",
                                  null
                                )
                              ),
                              a!save(
                                local!segmentoSeleccionadoNuevo,
                                index(
                                  #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2233353"(idSegmento: ri!idsegmento),
                                  "data",
                                  "segmento",
                                  null
                                )
                              ),
                              a!save(ri!idadmon, null()),
                              a!save(local!criterio, null),
                              a!save(local!criterioT, null),
                              a!save(local!buscarTipo, null),
                              a!save(ri!idsegmento, null()),
                              a!save(ri!refreshCount, ri!refreshCount + 1),
                              a!save(local!mostrarSuccess, true)
                            },
                            a!save(local!flag_error, addseconds(now(), 10))
                          ),
                          
                        }
                      )
                    },
                    submit: true,
                    size: "SMALL",
                    style: "DESTRUCTIVE",
                    disabled: {
                      if(
                        or(
                          a!isNullOrEmpty(ri!idadmon),
                          a!isNullOrEmpty(ri!idsegmento),
                          local!existeSupervisorSegmento
                        ),
                        true,
                        false
                      )
                    },
                    loadingIndicator: true
                  )
                },
                align: "START",
                marginAbove: "MORE"
              )
            )
          }
        ),
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_richTextDisplayField"(
                  value: {
                    #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: concat(
                        "Faltan por llenar los siguientes campos: ",
                        char(10),
                        if(
                          a!isNullOrEmpty(ri!idadmon),
                          concat("* Usuario", char(10)),
                          null
                        ),
                        if(
                          a!isNullOrEmpty(ri!idsegmento),
                          concat("* Segmento", char(10)),
                          null
                        )
                      ),
                      color: "NEGATIVE"
                    )
                  },
                  showWhen: or(
                    a!isNullOrEmpty(ri!idadmon),
                    a!isNullOrEmpty(ri!idsegmento)
                  )
                ),
                #"SYSTEM_SYSRULES_richTextDisplayField"(
                  value: {
                    #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: "* El supervisor ya se encuentra en este segmento, por favor seleccione otro segmento",
                      color: "NEGATIVE"
                    )
                  },
                  showWhen: local!existeSupervisorSegmento
                )
              }
            ),
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_cardLayout"(
                  contents: {
                    #"SYSTEM_SYSRULES_richTextDisplayField"(
                      value: {
                        #"SYSTEM_SYSRULES_richTextItem_v1"(
                          text: concat(
                            "Se ha insertado correctamente el usuario: ",
                            local!usuarioSeleccionado,
                            " en el segmento: ",
                            local!segmentoSeleccionadoNuevo
                          ),
                          color: "ACCENT",
                          style: "STRONG"
                        )
                      },
                      align: "CENTER"
                    ),
                    #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                      buttons: {
                        #"SYSTEM_SYSRULES_ButtonWidget"(
                          label: "ACEPTAR",
                          icon: "check",
                          value: false,
                          saveInto: {
                            {
                              local!mostrarSuccess,
                              local!showInformationBanner
                            },
                            a!save(local!usuarioSeleccionado, null),
                            a!save(local!segmentoSeleccionadoNuevo, null)
                          },
                          size: "SMALL",
                          style: "PRIMARY"
                        )
                      },
                      align: "CENTER"
                    )
                  },
                  /*showWhen: local!mostrarSuccess,*/
                  showWhen: and(
                    local!showInformationBanner,
                    local!showWhen
                  ),
                  style: "SUCCESS",
                  showBorder: false
                )
              }
            )
          }
        )
      },
      padding: "MORE",
      marginBelow: "MORE"
    ),
    #"SYSTEM_SYSRULES_sectionLayout_v1"(
      label: "",
      contents: {
        #"SYSTEM_SYSRULES_sectionLayout_v1"(
          label: "",
          contents: {
            #"SYSTEM_SYSRULES_richTextDisplayField"(
              labelPosition: "COLLAPSED",
              instructions: "",
              value: {
                "Muestra los ejecutivos que tienen acceso tipo supervisor así como su password y segmento."
              },
              align: "LEFT"
            ),
            #"SYSTEM_SYSRULES_columnsLayout"(
              columns: {
                /*CORRECTO ACTUALIZAR*/
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394093"(
                      showInformationBanner: local!showInformationBanner_actualizar
                    )
                  },
                  showWhen: and(
                    local!showInformationBanner_actualizar,
                    local!showWhen_actualizar
                  )
                ),
                /*ERROR ACTUALIZAR*/
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394317"(
                      showInformationBanner: local!showInformationBanner_actualizar
                    )
                  },
                  showWhen: and(
                    local!showInformationBanner_actualizar,
                    local!showWhen_error_actualizar
                  )
                ),
                /*CORRECTO ELIMINAR*/
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394093"(
                      showInformationBanner: local!showInformationBanner_eliminar
                    )
                  },
                  showWhen: and(
                    local!showInformationBanner_eliminar,
                    local!showWhen_eliminar
                  )
                ),
                /*ERROR ELIMINAR*/
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394317"(
                      showInformationBanner: local!showInformationBanner_eliminar
                    )
                  },
                  showWhen: and(
                    local!showInformationBanner_eliminar,
                    local!showWhen_error_eliminar
                  )
                ),
                
              }
            ),
            #"SYSTEM_SYSRULES_columnsLayout"(
              columns: {
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"SYSTEM_SYSRULES_textField"(
                      label: "Buscar por Usuario: ",
                      labelPosition: "ADJACENT",
                      value: local!criterioT,
                      saveInto: {
                        local!criterioT,
                        a!save(local!editGrid, null)
                      },
                      refreshAfter: "UNFOCUS",
                      validations: {}
                    )
                  }
                ),
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                      buttons: {
                        #"SYSTEM_SYSRULES_ButtonWidget"(
                          label: "Buscar",
                          loadingIndicator: true,
                          icon: "search",
                          saveInto: {
                            a!save(local!criterio, (local!criterioT)),
                            a!save(ri!refreshCount, ri!refreshCount + 1),
                            a!save(local!startIndex, 1)
                          },
                          size: "SMALL",
                          style: "PRIMARY"
                        )
                      },
                      align: "START"
                    )
                  }
                ),
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"SYSTEM_SYSRULES_dropdownField_v1"(
                      label: "Buscar Por Tipo:",
                      labelPosition: "ADJACENT",
                      placeholder: "--- Seleccione un valor ---",
                      choiceLabels: { "supervisor", "revisor" },
                      choiceValues: { "supervisor", "revisor" },
                      value: local!buscarTipo,
                      saveInto: {
                        local!buscarTipo,
                        a!save(local!editGrid, null),
                        a!save(ri!refreshCount, ri!refreshCount + 1),
                        a!save(local!startIndex, 1)
                      },
                      searchDisplay: "AUTO",
                      validations: {}
                    )
                  }
                )
              }
            ),
            #"SYSTEM_SYSRULES_richTextDisplayField"(
              value: {
                #"SYSTEM_SYSRULES_richTextItem_v1"(
                  text: "* El usuario ya existe en este segmento",
                  color: "NEGATIVE"
                )
              },
              showWhen: local!existeSupervisorSegmentoTabla,
              align: "RIGHT"
            ),
            #"SYSTEM_SYSRULES_columnsLayout"(
              columns: {
                #"SYSTEM_SYSRULES_columnLayout"(),
                #"SYSTEM_SYSRULES_columnLayout"(),
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"SYSTEM_SYSRULES_cardLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_richTextDisplayField"(
                          value: {
                            #"SYSTEM_SYSRULES_richTextItem_v1"(
                              text: concat(
                                "¿ Está seguro que desea quitar al usuario: ",
                                index(
                                  #"_a-0000e8b3-d748-8000-e5f3-01ef9001ef90_2402181"(
                                    idAdmon: local!segmentoUsuarioSeleccionado.idadmon
                                  ),
                                  "data",
                                  "nombre",
                                  null
                                ),
                                " del segmento: ",
                                index(
                                  #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2233353"(
                                    idSegmento: local!segmentoUsuarioSeleccionado.idsegmento
                                  ),
                                  "data",
                                  "segmento",
                                  null
                                ),
                                " ?"
                              ),
                              color: "NEGATIVE"
                            )
                          },
                          align: "CENTER"
                        ),
                        #"SYSTEM_SYSRULES_ButtonLayout"(
                          primaryButtons: {
                            #"SYSTEM_SYSRULES_ButtonWidget"(
                              label: "Sí, Eliminar",
                              icon: "trash",
                              saveInto: {
                                #"SYSTEM_SYSRULES_startProcess"(
                                  processModel: #"_a-0000e9a7-6d42-8000-e63f-01ef9001ef90_4874370",
                                  processParameters: {
                                    segmentousuario: local!segmentoUsuarioSeleccionado,
                                    delete: true
                                  },
                                  onSuccess: {
                                    a!save(
                                      local!showInformationBanner_eliminar,
                                      true
                                    ),
                                    if(
                                      toboolean(fv!processInfo.pv.error) = false,
                                      {
                                        a!save(
                                          local!flag_eliminar,
                                          addseconds(now(), 10)
                                        ),
                                        a!save(local!criterio, null),
                                        a!save(local!criterioT, null),
                                        a!save(local!buscarTipo, null),
                                        a!save(local!editGrid, null),
                                        a!save(local!indexEliminar, null),
                                        a!save(local!segmentoUsuarioSeleccionado, null),
                                        a!save(ri!refreshCount, ri!refreshCount + 1)
                                      },
                                      a!save(
                                        local!flag_error_eliminar,
                                        addseconds(now(), 10)
                                      )
                                    ),
                                    a!save(local!mostrarEliminar, false),
                                    
                                  }
                                )
                              },
                              size: "SMALL",
                              style: "DESTRUCTIVE",
                              loadingIndicator: true
                            )
                          },
                          secondaryButtons: {
                            #"SYSTEM_SYSRULES_ButtonWidget"(
                              label: "Cancelar",
                              icon: "times",
                              saveInto: {
                                a!save(
                                  local!segmentoUsuarioEditar[local!indexEliminar],
                                  local!segmentoUsuarioSeleccionado
                                ),
                                a!save(local!segmentoUsuarioSeleccionado, null),
                                a!save(local!editGrid, null),
                                a!save(local!indexEliminar, null),
                                a!save(local!mostrarEliminar, false),
                                a!save(ri!refreshCount, ri!refreshCount + 1)
                              },
                              size: "SMALL",
                              style: "SECONDARY"
                            )
                          }
                        )
                      },
                      style: "WARN",
                      showBorder: false
                    )
                  }
                )
              },
              showWhen: local!mostrarEliminar
            ),
            #"SYSTEM_SYSRULES_gridLayout"(
              label: "Tabla de Relación Usuario-Segmento",
              labelPosition: "ABOVE",
              totalCount: length(
                index(local!segmentosUsuarios, "data", null)
              ),
              headerCells: {
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "UsuarioN", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "Usuario", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "Nombre", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "Tipo", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "Password", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "Segmento", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "Accion", align: "CENTER")
              },
              columnConfigs: {
                #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(),
                #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(weight: 2)
              },
              rows: {
                {
                  #"SYSTEM_SYSRULES_forEach"(
                    items: if(
                      a!isNotNullOrEmpty(local!segmentosUsuarios),
                      index(local!segmentosUsuarios, "data", null),
                      null
                    ),
                    expression: #"SYSTEM_SYSRULES_gridRowLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_textField"(
                          value: index(
                            #"_a-0000e8b3-d748-8000-e5f3-01ef9001ef90_2402181"(idAdmon: index(fv!item,"idadmon", null)),
                            "data",
                            "usuarion",
                            "NO"
                          ),
                          readOnly: true,
                          align: "CENTER"
                        ),
                        #"SYSTEM_SYSRULES_textField"(
                          value: index(
                            #"_a-0000e8b3-d748-8000-e5f3-01ef9001ef90_2402181"(idAdmon: index(fv!item,"idadmon", null)),
                              "data",
                              "usuario",
                             "NO"
                            
                          ),
                          readOnly: true,
                          align: "CENTER"
                        ),
                        #"SYSTEM_SYSRULES_textField"(
                          value: 
                            index(
                              #"_a-0000e8b3-d748-8000-e5f3-01ef9001ef90_2402181"(idAdmon: index(fv!item,"idadmon", null)),
                              "data",
                              "nombre",
                             "NO"
                            
                          ),
                          readOnly: true,
                          align: "CENTER"
                        ),
                        #"SYSTEM_SYSRULES_textField"(
                          value: 
                            index(
                              #"_a-0000e8b3-d748-8000-e5f3-01ef9001ef90_2402181"(idAdmon: index(fv!item,"idadmon", null)),
                              "data",
                              "tipo",
                              "NO"
                            ),
                          readOnly: true,
                          align: "CENTER"
                        ),
                        #"SYSTEM_SYSRULES_textField"(
                          value: 
                            index(
                              #"_a-0000e8b3-d748-8000-e5f3-01ef9001ef90_2402181"(idAdmon: index(fv!item,"idadmon", null)),
                              "data",
                              "password",
                              "NO"
                          ),
                          readOnly: true,
                          align: "CENTER"
                        ),
                        #"SYSTEM_SYSRULES_dropdownField_v1"(
                          placeholder: "--- Seleccione el segmentow ---",
                          choiceLabels: index(local!cdt_segmento, "segmento", {}),
                          choiceValues: index(local!cdt_segmento, "idsegmento", {}),
                          value: index(local!segmentoUsuarioEditar[fv!index],"idsegmento", null),
                          saveInto: {
                            index(local!segmentoUsuarioEditar[fv!index],"idsegmento",null)
                          },
                          searchDisplay: "AUTO",
                          disabled: {
                            if(
                              a!isNullOrEmpty(local!editGrid),
                              true,
                              if(
                                and(
                                  local!editGrid = fv!index,
                                  a!isNullOrEmpty(local!indexEliminar)
                                ),
                                false,
                                true
                              )
                            )
                          }
                        ),
                        #"SYSTEM_SYSRULES_richTextDisplayField"(
                          value: {
                            #"SYSTEM_SYSRULES_richTextIcon"(
                              icon: "pencil-square-o",
                              caption: "Editar",
                              link: #"SYSTEM_SYSRULES_dynamicLink"(
                                saveInto: {
                                  a!save(local!editGrid, fv!index),
                                  a!save(
                                    local!segmentoUsuarioSeleccionado,
                                    'type!{urn:com:appian:types}cdo_segmentosusuario'(
                                      idsegusuario: index(fv!item,"idsegusuario", null),
                                      idadmon: index(fv!item,"idadmon", null),
                                      idsegmento: index(fv!item,"idsegmento", null)
                                    )
                                  )
                                }
                              ),
                              linkStyle: "STANDALONE",
                              showWhen: {
                                if(
                                  and(
                                    a!isNullOrEmpty(local!editGrid),
                                    a!isNullOrEmpty(local!indexEliminar)
                                  ),
                                  true,
                                  if(
                                    and(
                                      local!editGrid = fv!index,
                                      a!isNullOrEmpty(local!indexEliminar)
                                    ),
                                    false,
                                    if(
                                      local!editGrid &lt;&gt; fv!index,
                                      false,
                                      a!isNullOrEmpty(local!indexEliminar)
                                    )
                                  )
                                )
                              },
                              color: local!colorEdit
                            ),
                            #"SYSTEM_SYSRULES_richTextIcon"(
                              icon: "pencil-square-o",
                              caption: "Descartar cambios",
                              link: #"SYSTEM_SYSRULES_dynamicLink"(
                                saveInto: {
                                  a!save(local!editGrid, null),
                                  a!save(
                                    local!segmentoUsuarioEditar[fv!index],
                                    local!segmentoUsuarioSeleccionado
                                  ),
                                  a!save(local!segmentoUsuarioSeleccionado, null),
                                  a!save(ri!refreshCount, ri!refreshCount + 1)
                                }
                              ),
                              linkStyle: "STANDALONE",
                              showWhen: {
                                if(
                                  a!isNullOrEmpty(local!editGrid),
                                  false,
                                  if(
                                    and(
                                      local!editGrid = fv!index,
                                      a!isNullOrEmpty(local!indexEliminar)
                                    ),
                                    true,
                                    false
                                  )
                                )
                              },
                              color: local!colorDiscardChanges
                            ),
                            #"SYSTEM_SYSRULES_richTextIcon"(
                              icon: "file-invoice",
                              caption: "Actualizar",
                              link: #"SYSTEM_SYSRULES_dynamicLink"(
                                saveInto: {
                                  #"SYSTEM_SYSRULES_startProcess"(
                                    processModel: #"_a-0000e9a7-6d42-8000-e63f-01ef9001ef90_4874370",
                                    processParameters: {
                                      segmentousuario: local!segmentoUsuarioEditar[fv!index],
                                      delete: false
                                    },
                                    onSuccess: {
                                      a!save(
                                        local!showInformationBanner_actualizar,
                                        true
                                      ),
                                      if(
                                        toboolean(fv!processInfo.pv.error) = false,
                                        {
                                          a!save(
                                            local!flag_actualizar,
                                            addseconds(now(), 10)
                                          ),
                                          a!save(local!criterio, null),
                                          a!save(local!criterioT, null),
                                          a!save(local!buscarTipo, null),
                                          a!save(local!succes, fv!processInfo),
                                          a!save(local!editGrid, null),
                                          a!save(ri!refreshCount, ri!refreshCount + 1)
                                        },
                                        a!save(
                                          local!flag_error_actualizar,
                                          addseconds(now(), 10)
                                        )
                                      ),
                                      /*a!save(local!criterio,null),*/
                                      /*a!save(local!buscarTipo,null),*/
                                      /*a!save(local!succes, fv!processInfo),*/
                                      /*a!save(local!editGrid, null),*/
                                      /*a!save(ri!refreshCount, ri!refreshCount + 1)*/
                                      
                                    }
                                  )
                                }
                              ),
                              linkStyle: "STANDALONE",
                              showWhen: if(
                                a!isNullOrEmpty(local!editGrid),
                                false,
                                if(
                                  and(
                                    local!editGrid = fv!index,
                                    local!segmentoUsuarioSeleccionado &lt;&gt; local!segmentoUsuarioEditar[fv!index],
                                    not(local!existeSupervisorSegmentoTabla)
                                  ),
                                  true,
                                  false
                                )
                              ),
                              color: local!colorSave
                            ),
                            #"SYSTEM_SYSRULES_richTextIcon"(
                              icon: "times",
                              caption: "Eliminar Usuario",
                              link: #"SYSTEM_SYSRULES_dynamicLink"(
                                saveInto: {
                                  a!save(local!indexEliminar, fv!index),
                                  a!save(local!editGrid, fv!index),
                                  a!save(
                                    local!segmentoUsuarioSeleccionado,
                                    'type!{urn:com:appian:types}cdo_segmentosusuario'(
                                      idsegusuario: index(fv!item,"idsegusuario", null),
                                      idadmon: index(fv!item,"idadmon", null),
                                      idsegmento: index(fv!item,"idsegmento", null)
                                    )
                                  ),
                                  a!save(local!mostrarEliminar, true)
                                }
                              ),
                              linkStyle: "STANDALONE",
                              showWhen: {
                                if(
                                  a!isNullOrEmpty(local!editGrid),
                                  true,
                                  if(
                                    and(
                                      local!editGrid = fv!index,
                                      a!isNullOrEmpty(local!indexEliminar)
                                    ),
                                    true,
                                    false
                                  )
                                )
                              },
                              color: local!colorDV
                            )
                          },
                          align: "CENTER"
                        )
                      }
                    )
                  )
                }
              },
              selectionSaveInto: {},
              validations: {},
              shadeAlternateRows: true
            ),
            #"SYSTEM_SYSRULES_richTextDisplayField"(
              labelPosition: "COLLAPSED",
              value: {
                #"SYSTEM_SYSRULES_richTextIcon"(
                  icon: "angle-double-left",
                  link: #"SYSTEM_SYSRULES_dynamicLink"(
                    saveInto: { a!save(local!startIndex, 1) },
                    showWhen: not(local!startIndex = 1)
                  ),
                  linkStyle: "STANDALONE",
                  size: "MEDIUM_PLUS"
                ),
                #"SYSTEM_SYSRULES_richTextIcon"(
                  icon: "angle-left",
                  link: #"SYSTEM_SYSRULES_dynamicLink"(
                    saveInto: {
                      a!save(
                        local!startIndex,
                        tointeger(local!startIndex - 5)
                      )
                    },
                    showWhen: not(local!startIndex = 1)
                  ),
                  linkStyle: "STANDALONE",
                  size: "MEDIUM_PLUS"
                ),
                #"SYSTEM_SYSRULES_richTextItem_v1"(
                  text: {
                    #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: {
                        if(
                          local!segmentosUsuarios.totalCount = 0,
                          0,
                          local!startIndex
                        ) &amp; " - " &amp; if(
                          local!startIndex + 4 &gt; local!segmentosUsuarios.totalCount,
                          local!segmentosUsuarios.totalCount,
                          local!startIndex + 4
                        )
                      },
                      style: { "STRONG" }
                    ),
                    " de " &amp; local!segmentosUsuarios.totalCount
                  },
                  size: "STANDARD"
                ),
                #"SYSTEM_SYSRULES_richTextIcon"(
                  icon: "angle-right",
                  link: #"SYSTEM_SYSRULES_dynamicLink"(
                    saveInto: {
                      a!save(
                        local!startIndex,
                        tointeger(local!startIndex + 5)
                      )
                    },
                    showWhen: (local!startIndex + 4) &lt; local!segmentosUsuarios.totalCount
                  ),
                  linkStyle: "STANDALONE",
                  size: "MEDIUM_PLUS"
                ),
                #"SYSTEM_SYSRULES_richTextIcon"(
                  icon: "angle-double-right",
                  link: #"SYSTEM_SYSRULES_dynamicLink"(
                    saveInto: {
                      a!save(
                        local!startIndex,
                        tointeger(
                          local!segmentosUsuarios.totalCount - 4/*tointeger(*/
                          /*right(local!segmentosUsuarios.totalCount)*/
                          /*) + 1*/
                          
                        )
                      )
                    },
                    showWhen: (local!startIndex + 4) &lt; local!segmentosUsuarios.totalCount
                  ),
                  linkStyle: "STANDALONE",
                  size: "MEDIUM_PLUS"
                )
              },
              align: "RIGHT"
            )
          },
          divider: "ABOVE"
        )
      }
    )
  }
)</definition>
        <namedTypedValue>
            <name>idadmon</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>idsegmento</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>refreshCount</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <history>
        <historyInfo versionUuid="_a-0000e8b3-d748-8000-e5f3-01ef9001ef90_2402401"/>
        <historyInfo versionUuid="_a-0000ea3c-477e-8000-e648-01ef9001ef90_6934540"/>
        <historyInfo versionUuid="_a-0000eb09-d442-8000-e687-01ef9001ef90_8797735"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9396093"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9449907"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9465938"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9509596"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9541716"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9552597"/>
        <historyInfo versionUuid="_a-0000eb9b-4ec6-8000-e68b-01ef9001ef90_9643433"/>
        <historyInfo versionUuid="_a-0000ec5b-dce3-8000-e69f-01ef9001ef90_10119036"/>
    </history>
</contentHaul>
