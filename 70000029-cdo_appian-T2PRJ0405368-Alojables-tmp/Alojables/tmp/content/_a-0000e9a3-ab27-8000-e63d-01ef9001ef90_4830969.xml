<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9543120</versionUuid>
    <interface>
        <name>SCDO_ReporteAuditoria</name>
        <uuid>_a-0000e9a3-ab27-8000-e63d-01ef9001ef90_4830969</uuid>
        <description>Contiene la descarga de las tablas para documentar</description>
        <parentUuid>_a-0000e801-560f-8000-e5d9-01ef9001ef90_1707049</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  local!documento_pendiente_revisar,
  local!documento_no_documental,
  local!documento_revisados,
  local!documento_contratos_pendientes,
  local!busque_pendiente_revisar:false,
  local!busque_no_documental:false,
  local!busque_revisados:false,
  local!busque_contratos_pendientes:false,
  local!tipoReporte,
 
  {
    #"SYSTEM_SYSRULES_sectionLayout_v1"(
      label: "Descarga Auditoría",
      labelColor: "#cc0000",
      contents: {
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_dropdownField_v1"(
                  label: "Tabla:",
                  labelPosition: "ADJACENT",
                  placeholder: "--- Seleccionar un reporte ---",
                  choiceLabels: {
                    "Contratos Pendientes",
                    "Pendientes Por Revisar",
                    "No Documental Llamada",
                    "Revisados"
                  },
                  choiceValues: { 1, 2, 3, 4 },
                  value: local!tipoReporte,
                  saveInto: {
                    local!tipoReporte,
                    if(isnull(local!tipoReporte),
                   { a!save({
                      local!documento_contratos_pendientes,
                      local!documento_no_documental,
                      local!documento_pendiente_revisar,
                      local!documento_revisados
                    },null),
                    a!save({
                      local!busque_contratos_pendientes,
                      local!busque_no_documental,
                      local!busque_pendiente_revisar,
                      local!busque_revisados
                    },false),},
                    if(local!tipoReporte=1,
                    {a!save({
                      local!documento_pendiente_revisar,
                      local!documento_no_documental,
                      local!documento_revisados
                    },null),
                    a!save({
                      local!busque_pendiente_revisar,
                      local!busque_no_documental,
                      local!busque_revisados
                    },false),},
                    if(local!tipoReporte=2,
                   { a!save({
                      local!documento_contratos_pendientes,
                      local!documento_no_documental,
                      local!documento_revisados
                    },null),
                    a!save({
                      local!busque_contratos_pendientes,
                      local!busque_no_documental,
                      local!busque_revisados
                    },false)},
                    if(local!tipoReporte=3,
                   { a!save({
                      local!documento_contratos_pendientes,
                      local!documento_pendiente_revisar,
                      local!documento_revisados
                    },null),
                    a!save({
                      local!busque_contratos_pendientes,
                      local!busque_pendiente_revisar,
                      local!busque_revisados
                    },false),},
                    {a!save({
                      local!documento_contratos_pendientes,
                      local!documento_pendiente_revisar,
                      local!documento_no_documental,
                    },null),
                    a!save({
                      local!busque_contratos_pendientes,
                      local!busque_pendiente_revisar,
                      local!busque_no_documental,
                    },false)}
                      
                    )
                    )
                    )
                    ),
                 
                  },
                  searchDisplay: "AUTO",
                  validations: {}
                )
              },
              width: "MEDIUM"
            ),
            
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                  buttons: {
                    #"SYSTEM_SYSRULES_ButtonWidget"(
                      label: "Generar Auditoría",
                      style: "DESTRUCTIVE",
                      size: "SMALL",
                      icon: "file-excel-o",
                      loadingIndicator: true,
                      tooltip: if(
                        a!isNullOrEmpty(local!tipoReporte),
                        "Seleccione tabla",
                        "Generar Auditoría"
                      ),
                     
                      disabled: or(a!isNullOrEmpty(local!tipoReporte)),
                      saveInto: {

                        if(
                          local!tipoReporte = 1,
                         {
                           #"SYSTEM_SYSRULES_startProcess"(
                             processModel: #"_a-0000eb09-d442-8000-e687-01ef9001ef90_8875440",
                             onSuccess: {

                               a!save(
                                 local!documento_contratos_pendientes,
                                 fv!processInfo.pv.documento_salida
                               ),
                               a!save(
                                 local!busque_contratos_pendientes,
                                 true
                               ),

                             }
                           ),
                          
                         },
                          
                          if(
                            local!tipoReporte = 2,
                            #"SYSTEM_SYSRULES_startProcess"(
                              processModel: #"_a-0000eabf-35e2-8000-e683-01ef9001ef90_8525344",
                              onSuccess: {
                                /*a!save(local!mostrarEspera, true),*/
                                a!save(
                                  local!documento_pendiente_revisar,
                                  fv!processInfo.pv.documento_salida
                                ),
                                a!save(
                                  local!busque_pendiente_revisar,
                                  true
                                ),

                              }
                            ),
                           
                            if(
                              local!tipoReporte = 3,
                              #"SYSTEM_SYSRULES_startProcess"(
                                processModel: #"_a-0000eabf-35e2-8000-e683-01ef9001ef90_8499310",
                                onSuccess: {

                                  a!save(
                                    local!documento_no_documental,
                                    fv!processInfo.pv.documento_salida
                                  ),
                                  a!save(
                                    local!busque_no_documental,
                                   true
                                  ),

                                }
                              ),
                              { #"SYSTEM_SYSRULES_startProcess"(
                                processModel: #"_a-0000eb09-d442-8000-e687-01ef9001ef90_8875446",
                                onSuccess: {

                                  a!save(
                                    local!documento_revisados,
                                    fv!processInfo.pv.documento_salida
                                  ),
                                  a!save(
                                    local!busque_revisados,
                                    true
                                  ),

                                }
                              ),
                               
                              }
                            )
                          )
                        )
                      }
                    ),

                  },
                  align: "START"
                ),
                #"SYSTEM_SYSRULES_richTextDisplayField"(
                  labelPosition: "COLLAPSED",
                  value: {
                    if(
                      a!isNullOrEmpty(local!tipoReporte),
                      "",
                      if(
                        local!tipoReporte = 1,
                        {
                          #"SYSTEM_SYSRULES_richTextIcon"(
                          caption: "Descargar Contratos Pendientes",
                          icon: "download",
                          link: {
                            #"SYSTEM_SYSRULES_documentDownloadLink"(
                              document: local!documento_contratos_pendientes
                            ),

                          },
                          linkStyle: "STANDALONE",
                          showWhen:and(a!isNotNullOrEmpty(local!documento_contratos_pendientes),local!tipoReporte=1)
                        ),
                        #"SYSTEM_SYSRULES_richTextIcon"(
                          caption:"Ha ocurrido un error al obtener el documento.",
                          icon: "exclamation",


                          linkStyle: "STANDALONE",
                          showWhen:and(a!isNullOrEmpty(local!documento_contratos_pendientes),local!tipoReporte=1,local!busque_contratos_pendientes=true)
                        )
                        },
                        if(
                          local!tipoReporte = 2,
                          {#"SYSTEM_SYSRULES_richTextIcon"(
                            caption: "Descargar Pendientes Por Revisar",
                            icon: "download",
                            link: {
                              #"SYSTEM_SYSRULES_documentDownloadLink"(
                                document: local!documento_pendiente_revisar
                              ),

                            },
                            linkStyle: "STANDALONE",
                            showWhen:and(a!isNotNullOrEmpty(local!documento_pendiente_revisar),local!tipoReporte=2)
                          ),
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            caption:"Ha ocurrido un error al obtener el documento.",
                            icon: "exclamation",


                            linkStyle: "STANDALONE",
                            showWhen:and(a!isNullOrEmpty(local!documento_pendiente_revisar),local!tipoReporte=2,local!busque_pendiente_revisar=true)
                          )
                          },
                          if(
                            local!tipoReporte = 3,
                           
                               { #"SYSTEM_SYSRULES_richTextIcon"(
                                  caption: "Descargar No Documental",
                                  icon: "download",
                                  link: {
                                    #"SYSTEM_SYSRULES_documentDownloadLink"(document: local!documento_no_documental),

                                  },
                                  linkStyle: "STANDALONE",
                                  showWhen:and(a!isNotNullOrEmpty(local!documento_no_documental),local!tipoReporte=3)
                                ),
                                #"SYSTEM_SYSRULES_richTextIcon"(
                                  caption:"Ha ocurrido un error al obtener el documento.",
                                  icon: "exclamation",


                                  linkStyle: "STANDALONE",
                                  showWhen:and(a!isNullOrEmpty(local!documento_no_documental),local!tipoReporte=3,local!busque_no_documental=true)
                                )},

                           
                           { #"SYSTEM_SYSRULES_richTextIcon"(
                              caption: "Descargar Revisados",
                              icon: "download",
                              link: {
                                #"SYSTEM_SYSRULES_documentDownloadLink"(document: local!documento_revisados),

                              },
                              linkStyle: "STANDALONE",
                              showWhen:and(a!isNotNullOrEmpty(local!documento_revisados),local!tipoReporte=4)
                            ),
                            #"SYSTEM_SYSRULES_richTextIcon"(
                              caption:"Ha ocurrido un error al obtener el documento.",
                              icon: "exclamation",


                              linkStyle: "STANDALONE",
                              showWhen:and(a!isNullOrEmpty(local!documento_revisados),local!tipoReporte=4,local!busque_revisados=true)
                            )}

                          )
                        )
                      ),

                    )
                  }
                )

              }
            ),

          }
        ),
        

      }
    ),

  }
)</definition>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <history>
        <historyInfo versionUuid="_a-0000ea52-e6d5-8000-e654-01ef9001ef90_7408415"/>
        <historyInfo versionUuid="_a-0000eabf-35e2-8000-e683-01ef9001ef90_8504339"/>
        <historyInfo versionUuid="_a-0000eabf-35e2-8000-e683-01ef9001ef90_8504713"/>
        <historyInfo versionUuid="_a-0000eabf-35e2-8000-e683-01ef9001ef90_8525410"/>
        <historyInfo versionUuid="_a-0000eb09-d442-8000-e687-01ef9001ef90_8875512"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9391146"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9470174"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9543120"/>
    </history>
</contentHaul>
