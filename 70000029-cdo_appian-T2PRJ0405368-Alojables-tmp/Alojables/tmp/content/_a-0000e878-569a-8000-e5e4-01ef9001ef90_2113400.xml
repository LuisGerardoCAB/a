<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9505853</versionUuid>
    <interface>
        <name>SCDO_GridAccesos</name>
        <uuid>_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113400</uuid>
        <description>Interfaz con la tabla para los accesos de usuarios por usuario admin para SCDO.</description>
        <parentUuid>_a-0000e801-560f-8000-e5d9-01ef9001ef90_1707049</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  local!noCC: #"_a-0000ea22-4ef8-8000-e643-01ef9001ef90_6703025"(),
  local!mostrarSuccess: false,
  local!permisoDelete,
  local!userDelete,
  local!deleteSuccess: false,
  local!permisoGuardado,
  local!selectEdit,
  local!colorEdit: "#0032E6",
  local!colorDV: "#EC0000",
  /*Color para validaciones y boton eliminar*/
 
  local!colorSave: "#1F8926",
  local!bUser,
  local!bUserT,
  local!succes,
 
  
  local!showInformationBanner: true,
  local!showInformationBanner_actualizar: true,
  local!showInformationBanner_eliminar: true,
  
  /*correcto*/
  local!flag: now(),
  local!showWhen: a!refreshVariable(
    value: now() &lt; local!flag,
    refreshInterval: 0.5
  ),
  /*-----*/
  
  /*error*/
  local!flag_error: now(),
  local!showWhen_error: a!refreshVariable(
    value: now() &lt; local!flag_error,
    /* especifique el intervalo después de cuántos minutos desea finalizar el examen */
    refreshInterval: 0.5
  ),
  /*------*/
  
  /*correcto_actualizar*/
  local!flag_actualizar: now(),
  local!showWhen_actualizar: a!refreshVariable(
    value: now() &lt; local!flag_actualizar,
    refreshInterval: 0.5
  ),
  /*-----*/

  /*error_actualizasr*/
  local!flag_error_actualizar: now(),
  local!showWhen_error_actualizar: a!refreshVariable(
    value: now() &lt; local!flag_error_actualizar,
    /* especifique el intervalo después de cuántos minutos desea finalizar el examen */
    refreshInterval: 0.5
  ),
  /*------*/
  
  /*correcto_eliminar*/
  local!flag_eliminar: now(),
  local!showWhen_eliminar: a!refreshVariable(
    value: now() &lt; local!flag_eliminar,
    refreshInterval: 0.5
  ),
  /*-----*/
  
  /*error_elimianr*/
  local!flag_error_eliminar: now(),
  local!showWhen_error_eliminar: a!refreshVariable(
    value: now() &lt; local!flag_error_eliminar,
    /* especifique el intervalo después de cuántos minutos desea finalizar el examen */
    refreshInterval: 0.5
  ),
  /*------*/
  local!usuarioopicB: index(
    #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(usuarioOpic: local!bUser).data,
    "idusuarioopics",
    null
  ),
  local!expedientes: a!refreshVariable(
    value: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2114113"(idExpediente: null),
    refreshAlways: true,
    refreshOnVarChange: ri!refreshCount,
    
  ),
  local!usuariosOpics: a!refreshVariable(
    value: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(idSegmento: null),
    refreshAlways: true,
    refreshOnVarChange: ri!refreshCount
  ),
  local!accesoGrid: a!refreshVariable(
    value: if(
      or(
        a!isNullOrEmpty(local!usuarioopicB),
        isnull(local!bUser)
      ),
      {},
      #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113426"(
        idusuariooPics: index(
          #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(usuarioOpic: local!bUser).data,
          "idusuarioopics",
          null
        )
      )
    ),
    /*refreshAlways: true,*/
    refreshOnVarChange: ri!refreshCount
  ),
  local!tipoTemp: #"SYSTEM_SYSRULES_forEach"(
    items: if(a!isNotNullOrEmpty(local!accesoGrid),local!accesoGrid.data,{}),
    expression: {
      'type!{urn:com:appian:types}cdo_permisosusuarios'(
        tipoacceso: fv!item.tipoacceso
      )
    }
  ),
  local!accesoWrite: 'type!{urn:com:appian:types}cdo_permisosusuarios'(),
  local!editGrid: false,
  {
    #"SYSTEM_SYSRULES_cardLayout"(
      contents: {
        #"SYSTEM_SYSRULES_cardLayout"(
          contents: {
            #"SYSTEM_SYSRULES_columnsLayout"(
              columns: {
                #"SYSTEM_SYSRULES_columnLayout"(contents: {}),
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"SYSTEM_SYSRULES_richTextDisplayField"(
                      labelPosition: "COLLAPSED",
                      value: {
                        #"SYSTEM_SYSRULES_richTextItem_v1"(
                          text: {
                            "NO EXISTEN OPERACIONES SIN CENTRO DE COSTOS."
                          },
                          size: "MEDIUM"
                        )
                      },
                      align: "CENTER",
                      showWhen: local!noCC
                    )
                  }
                ),
                #"SYSTEM_SYSRULES_columnLayout"(contents: {})
              }
            ),
            #"SYSTEM_SYSRULES_columnsLayout"(
              columns: {
                #"SYSTEM_SYSRULES_columnLayout"(contents: {}),
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"SYSTEM_SYSRULES_cardLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_richTextDisplayField"(
                          value: {
                            #"SYSTEM_SYSRULES_richTextItem_v1"(
                              text: "¿Está seguro que desea eliminar el acceso al usuario: " &amp; local!userDelete &amp; "?" &amp; char(10) &amp; "La acción es irrevocable",
                              color: "NEGATIVE",
                              style: "STRONG"
                            )
                          },
                          align: "CENTER"
                        ),
                        #"SYSTEM_SYSRULES_ButtonLayout"(
                          primaryButtons: {
                            #"SYSTEM_SYSRULES_ButtonWidget"(
                              label: "Sí, Eliminar",
                              size: "SMALL",
                              style: "DESTRUCTIVE",
                              icon: "trash",
                              loadingIndicator: true,
                              saveInto: {
                                #"SYSTEM_SYSRULES_startProcess"(
                                  processModel: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2245902",
                                  processParameters: { permisosusuarios: local!permisoDelete, delete: true },
                                  onSuccess: {
                                    a!save(local!showInformationBanner_eliminar, true),
                                    if(
                                      toboolean(fv!processInfo.pv.error) = false,
                                      {a!save(local!flag_eliminar, addseconds(now(), 10)),
                                      a!save(local!bUserT,null),
                                      a!save(local!succes, fv!processInfo),
                                      a!save(local!bUser, null),
                                      a!save(
                                        local!accesoWrite,
                                        'type!{urn:com:appian:types}cdo_permisosusuarios'()
                                      ),
                                      /*a!save(local!deleteSuccess, false),*/
                                      a!save(local!userDelete, null),
                                      a!save(local!permisoDelete,null),
                                      a!save(ri!refreshCount, ri!refreshCount + 1)
                                      },
                                      a!save(local!flag_error_eliminar, addseconds(now(), 10))
                                    ),
                                    a!save(local!deleteSuccess, false),
                                    /*a!save(local!bUserT,null),*/
                                    /*a!save(local!succes, fv!processInfo),*/
                                    /*a!save(local!bUser, null),*/
                                    /*a!save(*/
                                      /*local!accesoWrite,*/
                                      /*'type!{urn:com:appian:types}cdo_permisosusuarios'()*/
                                    /*),*/
                                    /*a!save(local!deleteSuccess, false),*/
                                    /*a!save(local!userDelete, null),*/
                                    /*a!save(local!permisoDelete,null),*/
                                    /*a!save(ri!refreshCount, ri!refreshCount + 1)*/
                                  }
                                )
                              }
                            )
                          },
                          secondaryButtons: {
                            #"SYSTEM_SYSRULES_ButtonWidget"(
                              label: "Cancelar",
                              size: "SMALL",
                              style: "SECONDARY",
                              icon: "times",
                              saveInto: {
                                a!save(local!deleteSuccess, false),
                                a!save(local!userDelete, null),
                                a!save(local!permisoDelete,null)
                              }
                            )
                          }
                        )
                      },
                      style: "WARN",
                      showBorder: false,
                      showWhen: local!deleteSuccess
                    )
                  }
                ),
                
              }
            ),
            /*CORRECTO ACTUALIZAR*/
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394093"(
                  showInformationBanner: local!showInformationBanner_actualizar
                )
              },
              showWhen: and(
                local!showInformationBanner_actualizar,
                local!showWhen_actualizar
              )
            ),
            /*ERROR ACTUALIZAR*/
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394317"(
                  showInformationBanner: local!showInformationBanner_actualizar
                )
              },
              showWhen: and(
                local!showInformationBanner_actualizar,
                local!showWhen_error_actualizar
              )
            ),
            /*CORRECTO ELIMINAR*/
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394093"(
                  showInformationBanner: local!showInformationBanner_eliminar
                )
              },
              showWhen: and(
                local!showInformationBanner_eliminar,
                local!showWhen_eliminar
              )
            ),
            /*ERROR ELIMINAR*/
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394317"(
                  showInformationBanner: local!showInformationBanner_eliminar
                )
              },
              showWhen: and(
                local!showInformationBanner_eliminar,
                local!showWhen_error_eliminar
              )
            ),
            #"SYSTEM_SYSRULES_sectionLayout_v1"(
              label: "",
              contents: {
                #"SYSTEM_SYSRULES_columnsLayout"(
                  columns: {

                    #"SYSTEM_SYSRULES_columnLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_textField"(
                          label: "Buscar Usuario:",
                          labelPosition: "ADJACENT",
                          value: local!bUserT,
                          saveInto: local!bUserT,
                          refreshAfter: "KEYPRESS",
                          validations: {}
                        )
                      }
                    ),
                    #"SYSTEM_SYSRULES_columnLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                          buttons: {
                            #"SYSTEM_SYSRULES_ButtonWidget"(
                              label: "BUSCAR",
                              loadingIndicator: true,
                              saveInto: {
                                a!save(local!bUser, (local!bUserT))
                              },
                              style: "DESTRUCTIVE"
                            )
                          },
                          align: "START"
                        )
                      }
                    )
                  }
                ),
              
              },
              divider: "BELOW"
            ),
            #"SYSTEM_SYSRULES_gridLayout"(
              label: "Editable Grid",
              labelPosition: "COLLAPSED",
              emptyGridMessage: "No hay accesos que coincidan con la búsqueda.",
              headerCells: {
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "EXPEDIENTE", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "NOMBRE", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "PASSWORD", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "USUARIO", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "SEGMENTO", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "ACCESO", align: "CENTER"),
                #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "ACCIONES", align: "CENTER")
              },
              columnConfigs: {},
              rows: {
                #"SYSTEM_SYSRULES_forEach"(
                  items: local!accesoGrid,
                  expression: #"SYSTEM_SYSRULES_gridRowLayout"(
                    contents: {
                      #"SYSTEM_SYSRULES_textField"(
                        value: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2114113"(idExpediente: fv!item.idexpediente).data.expediente,
                        readOnly: true,
                        align: "CENTER"
                      ),
                      #"SYSTEM_SYSRULES_textField"(
                        value: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2114113"(idExpediente: fv!item.idexpediente).data.nombre,
                        readOnly: true,
                        align: "CENTER"
                      ),
                      #"SYSTEM_SYSRULES_textField"(
                        value: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2114113"(idExpediente: fv!item.idexpediente).data.fechaingreso,
                        readOnly: true,
                        align: "CENTER"
                      ),
                      #"SYSTEM_SYSRULES_textField"(
                        value: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(idUsuarioOpic: fv!item.idusuarioopics).data.usuarioopics,
                        readOnly: true,
                        align: "CENTER"
                      ),
                      #"SYSTEM_SYSRULES_textField"(
                        value: 
                        if(a!isNotNullOrEmpty(
                          #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2233353"(
                            idSegmento: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(idUsuarioOpic: fv!item.idusuarioopics).data.idsegmento
                          ).data
                        ),
                        #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2233353"(
                          idSegmento: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(idUsuarioOpic: fv!item.idusuarioopics).data.idsegmento
                        ).data.segmento,null
                        ),
                       
                        readOnly: true,
                        align: "CENTER"
                      ),
                      #"SYSTEM_SYSRULES_dropdownField_v1"(
                        choiceLabels: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2245690",
                        choiceValues: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2245690",
                        value: local!tipoTemp[fv!index].tipoacceso,
                        saveInto: { local!tipoTemp[fv!index].tipoacceso },
                        disabled: not(
                          contains(
                            tointeger(local!selectEdit),
                            tointeger(fv!item.idacceso)
                          )
                        )
                      ),
                      #"SYSTEM_SYSRULES_richTextDisplayField"(
                        value: {
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            icon: "pencil-square-o",
                            caption: "Editar",
                            link: #"SYSTEM_SYSRULES_dynamicLink"(
                              saveInto: a!save(
                                local!selectEdit,
                                append(local!selectEdit, fv!item.idacceso)
                              )
                            ),
                            linkStyle: "STANDALONE",
                            showWhen: not(
                              contains(
                                tointeger(local!selectEdit),
                                tointeger(fv!item.idacceso)
                              )
                            ),
                            color: local!colorEdit
                          ),
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            icon: "pencil-square-o",
                            caption: "Descartar Cambios",
                            link: #"SYSTEM_SYSRULES_dynamicLink"(
                              saveInto: {
                                a!save(local!selectEdit, null),
                                a!save(
                                  local!tipoTemp[fv!index].tipoacceso,
                                  fv!item.tipoacceso
                                ),

                              }
                            ),
                            linkStyle: "STANDALONE",
                            showWhen: and(
                              /*local!selectEdit = fv!index,*/
                              /*a!isNotNullOrEmpty(local!selectEdit),*/
                              contains(
                                tointeger(local!selectEdit),
                                tointeger(fv!item.idacceso)
                              )
                            ),
                            color: "#222222"
                          ),
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            icon: "file-invoice",
                            caption: "Actualizar",
                            link: #"SYSTEM_SYSRULES_dynamicLink"(
                              saveInto: {
                                a!save(fv!item.tipoacceso,local!tipoTemp[fv!index].tipoacceso[1]),
                                #"SYSTEM_SYSRULES_startProcess"(
                                  processModel: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2245902",
                                  processParameters: { permisosusuarios: fv!item, delete: false,codAudit:"CDO_0004",accion:"actualizó" },
                                  onSuccess: {
                                    
                                    a!save(local!showInformationBanner_actualizar, true),
                                    if(
                                      toboolean(fv!processInfo.pv.error) = false,
                                      {a!save(local!flag_actualizar, addseconds(now(), 10)),
                                      a!save(local!succes, fv!processInfo),
                                      a!save(local!editGrid, false),
                                      a!save(local!selectEdit, null),
                                      a!save(ri!refreshCount, ri!refreshCount + 1)
                                      },
                                      a!save(local!flag_error_actualizar, addseconds(now(), 10))
                                    ),
                                    /*a!save(local!succes, fv!processInfo),*/
                                    /*a!save(local!editGrid, false),*/
                                    /*a!save(local!selectEdit, null),*/
                                    /*a!save(ri!refreshCount, ri!refreshCount + 1)*/
                                  }
                                )
                              }
                            ),
                            linkStyle: "STANDALONE",
                            showWhen: and(
                              contains(
                                tointeger(local!selectEdit),
                                tointeger(fv!item.idacceso)
                              ),
                              or(
                                #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113426"(idAcceso: fv!item.idacceso).data.idexpediente &lt;&gt; fv!item.idexpediente,
                                #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113426"(idAcceso: fv!item.idacceso).data.idusuarioopics &lt;&gt; fv!item.idusuarioopics,
                                local!tipoTemp[fv!index].tipoacceso &lt;&gt; fv!item.tipoacceso
                              ),
                              not(
                                or(
                                  a!isNullOrEmpty(fv!item.idexpediente),
                                  a!isNullOrEmpty(fv!item.idusuarioopics),
                                  a!isNullOrEmpty(fv!item.tipoacceso)
                                )
                              ),
                              not(
                                and(
                                  #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113426"(idUsuariooPics: fv!item.idusuarioopics).totalCount &gt; 0,
                                  #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113426"(idAcceso: fv!item.idacceso).data.idusuarioopics &lt;&gt; fv!item.idusuarioopics
                                )
                              )/*not(*/
                              /*and(*/
                              /*rule!SCDO_getPermisosUByFilters(*/
                              /*idExpediente: fv!item.idexpediente*/
                              /*).totalCount &gt; 0,*/
                              /*rule!SCDO_getPermisosUByFilters(*/
                              /*idAcceso: fv!item.idacceso*/
                              /*).data.idexpediente &lt;&gt; fv!item.idexpediente*/
                              /*)*/
                              /*)*/
                              
                            ),
                            color: local!colorSave
                          ),
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            icon: "times",
                            caption: "Eliminar Acceso",
                            link: #"SYSTEM_SYSRULES_dynamicLink"(
                              saveInto: {
                                a!save(local!permisoDelete, fv!item),
                                a!save(
                                  local!userDelete,
                                  #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(idUsuarioOpic: fv!item.idusuarioopics).data.usuarioopics
                                ),
                                a!save(local!deleteSuccess,true)
                              }
                            ),
                            linkStyle: "STANDALONE",
                            color: local!colorDV
                          )
                        },
                        align: "LEFT"
                      )
                    }
                  )
                )
              },
              selectionSaveInto: {},
              showWhen: or(
                a!isNotNullOrEmpty(local!bUser),
                a!isNotNullOrEmpty(local!usuarioopicB)
              ),
              validations: {},
              shadeAlternateRows: true
            ),
            #"SYSTEM_SYSRULES_sectionLayout_v1"(
              label: "",
              contents: {
                #"SYSTEM_SYSRULES_richTextDisplayField"(
                  labelPosition: "COLLAPSED",
                  instructions: "",
                  value: {
                    "Muestra lista de accesos a usuarios en CDO con las operaciones de Eliminar, Modificar o Agregar"
                  },
                  align: "LEFT"
                )
              },
              divider: "BELOW"
            ),
            #"SYSTEM_SYSRULES_sectionLayout_v1"(
              label: "",
              contents: {
                
                #"SYSTEM_SYSRULES_richTextDisplayField"(
                  labelPosition: "COLLAPSED",
                  value: {
                    #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: { "*Apartado para asignar usuario a un expediente con su respectivo acceso (usuario-supervisor/usuario) " },
                      color: local!colorDV
                    )
                  },
                  align: "LEFT"
                )
              },
              divider: "BELOW"
            ),
            #"SYSTEM_SYSRULES_columnsLayout"(
              columns: {
                /*ERROR*/
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394317"(
                      showInformationBanner: local!showInformationBanner
                    )
                  },
                  showWhen: and(
                    local!showInformationBanner,
                    local!showWhen_error
                  )
                ),
              }
            ),
            #"SYSTEM_SYSRULES_sectionLayout_v1"(
              label: "",
              contents: {
                #"SYSTEM_SYSRULES_sideBySideLayout"(
                  items: {
                    #"SYSTEM_SYSRULES_sideBySideItem"(
                      item: #"SYSTEM_SYSRULES_dropdownField_v1"(
                        label: "Expediente",
                        labelPosition: "ABOVE",
                        placeholder: "--- Seleccione un valor---",
                        choiceLabels: index(local!expedientes.data,"nombre",{}),
                        choiceValues: index(local!expedientes.data,"idexpediente",{}),
                        value: local!accesoWrite.idexpediente,
                        saveInto: {
                          local!accesoWrite.idexpediente,
                          /*a!save(*/
                          /*local!accesoWrite.idacceso,*/
                          /*rule!SCDO_getPermisosUByFilters(*/
                          /*idAcceso: null*/
                          /*).totalCount + 1*/
                          /*),*/
                          a!save(
                            local!accesoWrite.fechaaltaacceso,
                            now()
                          )
                        },
                        searchDisplay: "AUTO",
                        validations: {}
                      )
                    ),
                    #"SYSTEM_SYSRULES_sideBySideItem"(
                      item: #"SYSTEM_SYSRULES_dropdownField_v1"(
                        label: "Usuario",
                        labelPosition: "ABOVE",
                        placeholder: "--- Seleccione un valor ---",
                        choiceLabels: index(local!usuariosOpics.data,"usuarioopics",{}),
                        choiceValues: index(local!usuariosOpics.data,"idusuarioopics",{}),
                        value: local!accesoWrite.idusuarioopics,
                        saveInto: { local!accesoWrite.idusuarioopics },
                        searchDisplay: "AUTO",
                        validations: {}
                      )
                    ),
                    #"SYSTEM_SYSRULES_sideBySideItem"(
                      item: #"SYSTEM_SYSRULES_dropdownField_v1"(
                        label: "Acceso",
                        labelPosition: "ABOVE",
                        placeholder: "--- Seleccione un valor ---",
                        choiceLabels: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2245690",
                        choiceValues: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2245690",
                        value: local!accesoWrite.tipoacceso,
                        saveInto: { local!accesoWrite.tipoacceso },
                        searchDisplay: "AUTO",
                        validations: {}
                      )
                    ),
                    #"SYSTEM_SYSRULES_sideBySideItem"(
                      item: #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                        buttons: {
                          #"SYSTEM_SYSRULES_ButtonWidget"(
                            label: "Guardar",
                            loadingIndicator: true,
                            icon: "save",
                            saveInto: {
                              #"SYSTEM_SYSRULES_startProcess"(
                                processModel: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2245902",
                                processParameters: {
                                  permisosusuarios: local!accesoWrite,
                                  delete: false
                                },
                                onSuccess: {
                                  a!save(local!showInformationBanner, true),
                                  if(
                                    toboolean(fv!processInfo.pv.error) = false,
                                    {a!save(local!flag, addseconds(now(), 10)),
                                    a!save(local!succes, fv!processInfo),
                                    a!save(local!bUser, null),
                                    a!save(
                                      local!accesoWrite,
                                      'type!{urn:com:appian:types}cdo_permisosusuarios'(
                                        idacceso: null,
                                        idexpediente: local!accesoWrite.idexpediente,
                                        idusuarioopics: local!accesoWrite.idusuarioopics,
                                        fechaaltaacceso: now(),
                                        tipoacceso: local!accesoWrite.tipoacceso
                                      )
                                    ),
                                    a!save(
                                      local!permisoGuardado,
                                      #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2114113"(
                                        idExpediente: local!accesoWrite.idexpediente
                                      ).data[1].nombre
                                    ),
                                    a!save(local!mostrarSuccess, true),
                                    a!save(
                                      local!accesoWrite,
                                      'type!{urn:com:appian:types}cdo_permisosusuarios'()
                                    ),
                                    a!save(ri!refreshcount, ri!refreshCount + 1)
                                    
                                    },
                                    a!save(local!flag_error, addseconds(now(), 10))
                                  ),
                                
                                  
                                }
                              )
                            },
                            size: "SMALL",
                            disabled: {
                              or(
                                isnull(local!accesoWrite.idexpediente),
                                isnull(local!accesoWrite.idusuarioopics),
                                isnull(local!accesoWrite.tipoacceso),
                                #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113426"(
                                  idUsuariooPics: local!accesoWrite.idusuarioopics
                                ).totalCount &gt; 0
                              )
                            }
                          )
                        },
                        align: "START"
                      )
                    )
                  }
                ),
                #"SYSTEM_SYSRULES_cardLayout"(
                  contents: {
                    #"SYSTEM_SYSRULES_richTextDisplayField"(
                      value: {
                        #"SYSTEM_SYSRULES_richTextItem_v1"(
                          text: concat(
                            "Se ha creado correctamente el permiso para el usuario: ",
                            local!permisoGuardado
                          ),
                          color: "ACCENT",
                          style: "STRONG"
                        )
                      },
                      align: "CENTER"
                    ),
                    #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                      buttons: {
                        #"SYSTEM_SYSRULES_ButtonWidget"(
                          label: "ACEPTAR",
                          icon: "check",
                          value: false,
                          saveInto: {
                            /*local!mostrarSuccess,*/
                            local!showInformationBanner,
                            a!save(local!permisoGuardado, null)
                          },
                          size: "SMALL",
                          style: "PRIMARY"
                        )
                      },
                      align: "CENTER"
                    )
                  },
                  /*showWhen: local!mostrarSuccess,*/
                  showWhen: and(
                    local!showInformationBanner,
                    local!showWhen
                  ),
                  style: "SUCCESS",
                  padding: "STANDARD",
                  showBorder: false,
                  decorativeBarColor: "POSITIVE"
                ),
                #"SYSTEM_SYSRULES_sideBySideLayout"(items: { #"SYSTEM_SYSRULES_sideBySideItem"(item: {}, ) }),
                #"SYSTEM_SYSRULES_columnsLayout"(
                  columns: {
                    #"SYSTEM_SYSRULES_columnLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_richTextDisplayField"(
                          labelPosition: "COLLAPSED",
                          value: {
                            #"SYSTEM_SYSRULES_richTextItem_v1"(
                              text: {
                                "* Los siguientes campos están vacíos: " &amp; char(10),
                                if(
                                  isnull(local!accesoWrite.idexpediente),
                                  "Expediente" &amp; char(10),
                                  {}
                                ),
                                if(
                                  isnull(local!accesoWrite.idusuarioopics),
                                  "Usuario" &amp; char(10),
                                  {}
                                ),
                                if(
                                  isnull(local!accesoWrite.tipoacceso),
                                  "Acceso",
                                  {}
                                )
                              },
                              color: local!colorDV
                            )
                          },
                          showWhen: or(
                            isnull(local!accesoWrite.idexpediente),
                            isnull(local!accesoWrite.idusuarioopics),
                            isnull(local!accesoWrite.tipoacceso)
                          )
                        ),
                        #"SYSTEM_SYSRULES_richTextDisplayField"(
                          labelPosition: "COLLAPSED",
                          value: {
                            #"SYSTEM_SYSRULES_richTextItem_v1"(
                              text: {
                                "* El expediente " &amp; #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2114113"(
                                  idExpediente: local!accesoWrite.idexpediente
                                ).data.nombre &amp; " ya pertenece al siguiente usuario " &amp; #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(
                                  idUsuarioOpic: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113426"(
                                    idExpediente: local!accesoWrite.idexpediente
                                  ).data.idusuarioopics
                                ).data.usuarioopics
                              },
                              color: local!colorDV
                            )
                          },
                          showWhen: false
                      
                          
                        ),
                        #"SYSTEM_SYSRULES_richTextDisplayField"(
                          labelPosition: "COLLAPSED",
                          value: {
                            #"SYSTEM_SYSRULES_richTextItem_v1"(
                              text: {
                                "* El usuario " &amp; #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(
                                  idUsuarioOpic: local!accesoWrite.idusuarioopics
                                ).data.usuarioopics &amp; " ya pertenece al siguiente expediente " &amp; #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2114113"(
                                  idExpediente: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113426"(
                                    idUsuariooPics: local!accesoWrite.idusuarioopics
                                  ).data.idexpediente
                                ).data[1].nombre
                              },
                              color: local!colorDV
                            )
                          },
                          showWhen: and(
                            a!isNotNullOrEmpty(local!accesoWrite.idexpediente),
                            a!isNotNullOrEmpty(local!accesoWrite.idusuarioopics),
                            #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2113426"(
                              idUsuariooPics: local!accesoWrite.idusuarioopics
                            ).totalCount &gt; 0
                          )
                        )
                      }
                    ),
                    #"SYSTEM_SYSRULES_columnLayout"(contents: {}),
                    #"SYSTEM_SYSRULES_columnLayout"(contents: {}),
                    #"SYSTEM_SYSRULES_columnLayout"(contents: {}),
                    #"SYSTEM_SYSRULES_columnLayout"(contents: {})
                  }
                )
              }
            )
          },
          height: "AUTO",
          style: "NONE",
          marginBelow: "NONE",
          showBorder: false
        ),
        
      },
      height: "AUTO",
      showWhen: true,
     
      marginBelow: "STANDARD"
    )
  }
)</definition>
        <namedTypedValue>
            <name>refreshCount</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <history>
        <historyInfo versionUuid="_a-0000e8b9-0989-8000-e5fd-01ef9001ef90_2447431"/>
        <historyInfo versionUuid="_a-0000ea52-e6d5-8000-e654-01ef9001ef90_7418287"/>
        <historyInfo versionUuid="_a-0000eabf-35e2-8000-e683-01ef9001ef90_8456286"/>
        <historyInfo versionUuid="_a-0000eb09-d442-8000-e687-01ef9001ef90_8784445"/>
        <historyInfo versionUuid="_a-0000eb09-d442-8000-e687-01ef9001ef90_9063677"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9171174"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9395442"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9469213"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9505853"/>
    </history>
</contentHaul>
