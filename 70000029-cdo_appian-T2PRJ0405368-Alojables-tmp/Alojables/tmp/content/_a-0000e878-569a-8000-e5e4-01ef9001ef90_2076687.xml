<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9390666</versionUuid>
    <interface>
        <name>SCDO_Grid2</name>
        <uuid>_a-0000e878-569a-8000-e5e4-01ef9001ef90_2076687</uuid>
        <description>Tabla con los Documentos por revisar</description>
        <parentUuid>_a-0000e801-560f-8000-e5d9-01ef9001ef90_1707049</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  /*Datos de prueba  */
  /*local!contrato: "60541900216",*/
  /*local!operacion: "2162118",*/
  /*local!documentacion: rule!SCDO_obtenerDocumentacionPendientePorContrato(contrato: "60541900216"),*/
  local!indicePagina: 1,
  local!digitalizadoSeleccionado,
  local!documentacionSeleccionada,
  local!decisionSeleccionada,
  local!indiceDocu,
  local!decisionFinal,
  local!rechazar,
  local!observaciones,
  /*local!prueba: rule!SCDO_ALGUN_PENDIENTE(ri!digitalizados),*/
  {
    #"SYSTEM_SYSRULES_sectionLayout_v1"(
      label: "",
      contents: {
        #"SYSTEM_SYSRULES_sideBySideLayout"(
          items: {
            #"SYSTEM_SYSRULES_sideBySideItem"(
              item: #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                buttons: {
                  #"SYSTEM_SYSRULES_ButtonWidget"(
                    label: "Salir",
                    icon: "window-close",
                    value: false,
                    size: "SMALL",
                    saveInto: {
                      a!save(ri!mostrarGrid, true),
                      ri!mostrarDocumentos,
                      a!save(ri!reporte, null),
                      a!save(ri!digitalizados, null),
                      a!save(ri!documentacion, null),
                      a!save(local!observaciones, null)
                    },
                    submit: true,
                    style: "SECONDARY"
                  )
                },
                align: "END"
              )
            )
          },
          showWhen: a!isNullOrEmpty(ri!soloDocumentos)
        ),
        #"SYSTEM_SYSRULES_richTextDisplayField"(
          value: {
            #"SYSTEM_SYSRULES_richTextItem_v1"(
              text: { "Documentación de Operación" },
              size: "MEDIUM_PLUS"
            )
          },
          align: "CENTER"
        )
      }
    ),
    choose(
      local!indicePagina,
      {
        {
          /*a!gridField(*/
          /*label: {*/
          /*concat(*/
          /*"Documentación del Contrato: ",*/
          /*if(*/
          /*a!isNotNullOrEmpty(ri!reporte),*/
          /*ri!reporte.contrato,*/
          /*if(*/
          /*a!isNotNullOrEmpty(ri!reporteAprobado),*/
          /*ri!reporteAprobado.contrato,*/
          /*"Sin contrato"*/
          /*)*/
          /*)*/
          /*)*/
          /*},*/
          /*data: ri!documentacion,*/
          /*emptyGridMessage: "No hay documentacón para mostrar",*/
          /*labelPosition: "ABOVE",*/
          /*spacing: "DENSE",*/
          /*columns: {*/
          /*a!gridColumn(*/
          /*label: "Documento",*/
          /*value: if(a!isNullOrEmpty(rule!SCDO_getcdo_catalogo_documentos(iddocumento: fv!row.iddocumento)), "NO", rule!SCDO_getcdo_catalogo_documentos(iddocumento: fv!row.iddocumento).documento),*/
          /*align: "CENTER",*/
          /*width: "AUTO"*/
          /*),*/
          /*a!gridColumn(*/
          /*label: "Archivo",*/
          /*value: if(isnull(fv!row.nomdocumento), "NO", fv!row.nomdocumento),*/
          /*align: "CENTER",*/
          /*width: "AUTO"*/
          /*),*/
          /*a!gridColumn(*/
          /*label: "Corresponde",*/
          /*value: fv!row.tipo,*/
          /*align: "CENTER",*/
          /*width: "AUTO"*/
          /*),*/
          /*a!gridColumn(*/
          /*label: "Estado",*/
          /*value: if(a!isNullOrEmpty(fv!row.estado), "NO", if(fv!row.estado = "P", "Pendiente", if(fv!row.estado = "A", "Aceptado", "NO"))),*/
          /*align: "CENTER",*/
          /*width: "AUTO"*/
          /*),*/
          /*a!gridColumn(*/
          /*label: "Ver Doctos",*/
          /*value: a!richTextDisplayField(*/
          /*value: a!richTextIcon(*/
          /*icon: "file-signature",*/
          /*link: a!startProcessLink()*/
          /*)*/
          /*),*/
          /*align: "CENTER",*/
          /*width: "AUTO"*/
          /*),*/
          /*a!gridColumn(*/
          /*label: "Aceptar",*/
          /*value: a!richTextDisplayField(*/
          /*value: if(*/
          /*fv!row.estado == "A",*/
          /*{*/
          /*a!richTextItem(text: "Aceptada", color: "#008000")*/
          /*},*/
          /*{*/
          /*a!richTextIcon(*/
          /*icon: "check-circle-o",*/
          /*link: a!dynamicLink(*/
          /*saveInto: {*/
          /*a!save(local!indicePagina, 2),*/
          /*a!save(local!documentacionSeleccionada, fv!row),*/
          /*a!save(local!decisionSeleccionada, "Aceptar"),*/
          /*a!save(local!indiceDocu, fv!identifier),*/
          /*}*/
          /*),*/
          /*color: "POSITIVE",*/
          /*linkStyle: "STANDALONE"*/
          /*)*/
          /*}*/
          /*)*/
          /*),*/
          /*align: "CENTER",*/
          /*width: "AUTO",*/
          /**/
          /*),*/
          /*a!gridColumn(*/
          /*label: "Rechazar",*/
          /*value: a!richTextDisplayField(*/
          /*value: if(*/
          /*fv!row.estado == "A",*/
          /*{},*/
          /*{*/
          /*a!richTextIcon(*/
          /*icon: "times-circle-o",*/
          /*link: a!dynamicLink(*/
          /*saveInto: {*/
          /*a!save(local!indicePagina, 2),*/
          /*a!save(local!decisionSeleccionada, "Rechazar"),*/
          /*a!save(local!documentacionSeleccionada, fv!row),*/
          /*a!save(local!indiceDocu, fv!identifier),*/
          /*}*/
          /*),*/
          /*color: "NEGATIVE",*/
          /*linkStyle: "STANDALONE"*/
          /*)*/
          /*}*/
          /*)*/
          /*),*/
          /*align: "CENTER",*/
          /*width: "AUTO"*/
          /*),*/
          /**/
          /*},*/
          /**/
          /*),*/
          #"SYSTEM_SYSRULES_gridField_v1"(
            label: {
              concat(
                "Información del Contrato: ",
                if(
                  a!isNotNullOrEmpty(ri!reporte),
                  ri!reporte.contrato,
                  if(
                    a!isNotNullOrEmpty(ri!reporteAprobado),
                    ri!reporteAprobado.contrato,
                    "Sin contrato"
                  )
                ),
                " y Operación: ",
                if(
                  a!isNotNullOrEmpty(ri!reporte),
                  ri!reporte.operacion,
                  if(
                    a!isNotNullOrEmpty(ri!reporteAprobado),
                    ri!reporteAprobado.operacion,
                    "Sin operación"
                  )
                )
              )
            },
            labelPosition: "ABOVE",
            emptyGridMessage: "No hay elementos para mostrar",
            data: ri!digitalizados,
            columns: {
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Documento",
                value: if(
                  a!isNullOrEmpty(
                    #"_a-0000e968-30a1-8000-e639-01ef9001ef90_4493570"(iddocumento: fv!row.iddocumento)
                  ),
                  "NO",
                  #"_a-0000e968-30a1-8000-e639-01ef9001ef90_4493570"(iddocumento: fv!row.iddocumento).documento
                ),
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Archivo",
                value: if(
                  isnull(fv!row.nombreimagen),
                  "NO",
                  fv!row.nombreimagen
                ),
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Corresponde",
                value: "OPER",
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Estado",
                value: if(
                  a!isNullOrEmpty(fv!row.estado),
                  "NO",
                  if(
                    fv!row.estado = "P",
                    "Pendiente",
                    if(fv!row.estado = "A", "Aceptado", "NO")
                  )
                ),
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Ver Doctos",
                value: a!localVariables(
                  local!documento_descargar,
                  local!busque: false,
                  #"SYSTEM_SYSRULES_richTextDisplayField"(
                    labelPosition: "COLLAPSED",
                    value: {
                      #"SYSTEM_SYSRULES_richTextIcon"(
                        icon: "file-signature",
                        link: {
                          #"SYSTEM_SYSRULES_dynamicLink"(
                            saveInto: {
                              #"SYSTEM_SYSRULES_startProcess"(
                                processModel: #"_a-0000eabf-35e2-8000-e683-01ef9001ef90_8425441",
                                processParameters: { nombre_doc: fv!row.nombreimagen },
                                onSuccess: {
                                  a!save(
                                    local!documento_descargar,
                                    fv!processInfo.pv.documento
                                  ),
                                  a!save(local!busque, true),

                                }
                              ),

                            }
                          ),

                        },
                        linkStyle: "STANDALONE"
                      ),
                      if(
                        local!busque = false,
                        "",
                        if(
                          and(
                            local!busque,
                            a!isNotNullOrEmpty(local!documento_descargar)
                          ),
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            caption: "Descargar documento.",
                            icon: "download",
                            link: {
                              #"SYSTEM_SYSRULES_documentDownloadLink"(document: local!documento_descargar),

                            },
                            linkStyle: "STANDALONE"
                          ),
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            caption: "Ha ocurrido un error al obtener el documento.",
                            icon: "exclamation",
                            linkStyle: "STANDALONE"
                          )
                        )
                      )
                    }
                  ),

                ),
                /*a!richTextDisplayField(*/
                /*value: a!richTextIcon(*/
                /*icon: "file-signature",*/
                /*link: a!startProcessLink()*/
                /*)*/
                /*),*/
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                showWhen: a!isNullOrEmpty(ri!soloDocumentos),
                label: "Aceptar",
                value: #"SYSTEM_SYSRULES_richTextDisplayField"(
                  value: if(
                    fv!row.estado = "A",
                    {
                      #"SYSTEM_SYSRULES_richTextItem_v1"(text: "Aceptada", color: "#008000")
                    },
                    {
                      #"SYSTEM_SYSRULES_richTextIcon"(
                        icon: "check-circle-o",
                        link: #"SYSTEM_SYSRULES_dynamicLink"(
                          saveInto: {
                            a!save(local!indicePagina, 2),
                            a!save(local!digitalizadoSeleccionado, fv!row),
                            a!save(local!decisionSeleccionada, "Aceptar"),
                            a!save(local!indiceDocu, fv!identifier)
                          }
                        ),
                        linkStyle: "STANDALONE",
                        color: "POSITIVE"
                      )
                    }
                  )
                ),
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                showWhen: a!isNullOrEmpty(ri!soloDocumentos),
                label: "Rechazar",
                value: #"SYSTEM_SYSRULES_richTextDisplayField"(
                  value: if(
                    fv!row.estado = "A",
                    {},
                    {
                      #"SYSTEM_SYSRULES_richTextIcon"(
                        icon: "times-circle-o",
                        link: #"SYSTEM_SYSRULES_dynamicLink"(
                          saveInto: {
                            a!save(local!indicePagina, 2),
                            a!save(local!decisionSeleccionada, "Rechazar"),
                            a!save(local!digitalizadoSeleccionado, fv!row),
                            a!save(local!indiceDocu, fv!identifier),

                          }
                        ),
                        linkStyle: "STANDALONE",
                        color: "NEGATIVE"
                      )
                    }
                  )
                ),
                align: "CENTER",
                width: "AUTO"
              )
            },
            spacing: "DENSE"
          ),
          #"SYSTEM_SYSRULES_gridField_v1"(
            label: {
              "Información de la documentación rechazada"
            },
            labelPosition: "ABOVE",
            emptyGridMessage: "No hay elementos para mostrar",
            data: ri!digitalizados_rechazados,
            columns: {
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Documento",
                value: if(
                  a!isNullOrEmpty(
                    #"_a-0000e968-30a1-8000-e639-01ef9001ef90_4493570"(iddocumento: fv!row.iddocumento)
                  ),
                  "NO",
                  #"_a-0000e968-30a1-8000-e639-01ef9001ef90_4493570"(iddocumento: fv!row.iddocumento).documento
                ),
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Archivo",
                value: if(
                  isnull(fv!row.nombreimagen),
                  "NO",
                  fv!row.nombreimagen
                ),
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Corresponde",
                value: "OPER",
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Estado",
                value: "Rechazada",
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Usuario Rechazó",
                value: if(
                  a!isNullOrEmpty(fv!row.usuariorechazo),
                  "-",
                  fv!row.usuariorechazo
                ),
                align: "CENTER",
                width: "AUTO"
              ),
              #"SYSTEM_SYSRULES_gridColumn"(
                label: "Ver Doctos",
                value: a!localVariables(
                  local!documento_descargar,
                  local!busque: false,
                  #"SYSTEM_SYSRULES_richTextDisplayField"(
                    labelPosition: "COLLAPSED",
                    value: {
                      #"SYSTEM_SYSRULES_richTextIcon"(
                        icon: "file-signature",
                        link: {
                          #"SYSTEM_SYSRULES_dynamicLink"(
                            saveInto: {
                              #"SYSTEM_SYSRULES_startProcess"(
                                processModel: #"_a-0000eabf-35e2-8000-e683-01ef9001ef90_8425441",
                                processParameters: { nombre_doc: fv!row.nombreimagen },
                                onSuccess: {
                                  a!save(
                                    local!documento_descargar,
                                    fv!processInfo.pv.documento
                                  ),
                                  a!save(local!busque, true),

                                }
                              ),

                            }
                          ),

                        },
                        linkStyle: "STANDALONE"
                      ),
                      if(
                        local!busque = false,
                        "",
                        if(
                          and(
                            local!busque,
                            a!isNotNullOrEmpty(local!documento_descargar)
                          ),
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            caption: "Descargar documento.",
                            icon: "download",
                            link: {
                              #"SYSTEM_SYSRULES_documentDownloadLink"(document: local!documento_descargar),

                            },
                            linkStyle: "STANDALONE"
                          ),
                          #"SYSTEM_SYSRULES_richTextIcon"(
                            caption: "Ha ocurrido un error al obtener el documento.",
                            icon: "exclamation",
                            linkStyle: "STANDALONE"
                          )
                        )
                      )
                    }
                  ),

                ),
                /*a!richTextDisplayField(*/
                /*value: a!richTextIcon(*/
                /*icon: "file-signature",*/
                /*link: a!startProcessLink()*/
                /*)*/
                /*),*/
                align: "CENTER",
                width: "AUTO"
              ),

            },
            spacing: "DENSE"
          )
        },
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_richTextDisplayField"(
                  label: "",
                  value: {
                    #"SYSTEM_SYSRULES_richTextIcon"(icon: "info", color: "NEGATIVE"),
                    #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: "Si desea aceptar o rechazar la operación debe ingresar un comentario",
                      color: "NEGATIVE",
                      size: "SMALL"
                    )
                  },
                  marginAbove: "MORE",
                  marginBelow: "NONE"
                ),
                #"SYSTEM_SYSRULES_paragraphField"(
                  label: "",
                  labelPosition: "ABOVE",
                  value: local!observaciones,
                  saveInto: {
                    local!observaciones,
                    a!save(ri!reporte.observaciones, save!value)
                  },
                  refreshAfter: "KEYPRESS",
                  validations: {}
                )
              }
            ),
            #"SYSTEM_SYSRULES_columnLayout"(contents: {})
          },
          showWhen: a!isNullOrEmpty(ri!soloDocumentos)
        ),
        #"SYSTEM_SYSRULES_sideBySideLayout"(
          items: {
            #"SYSTEM_SYSRULES_sideBySideItem"(
              item: #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                buttons: {
                  #"SYSTEM_SYSRULES_ButtonWidget"(
                    label: "Aceptar",
                    icon: "check",
                    submit: false,
                    loadingIndicator: true,
                    confirmHeader: "¿Desea Aceptar este reporte?",
                    confirmMessage: "El reporte pasará a estar en el apartado de Revisados",
                    confirmButtonLabel: "Sí, Aceptar",
                    cancelButtonLabel: "Cancelar",
                    saveInto: {
                      local!rechazar,
                      #"SYSTEM_SYSRULES_startProcess"(
                        processModel: #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4780412",
                        processParameters: {
                          rechazado: local!rechazar,
                          reporte: ri!reporte,

                        },
                        onSuccess: {
                          a!save(ri!mostrarDocumentos, false),
                          a!save(ri!reporte, null),
                          a!save(ri!documentacion, null),
                          a!save(ri!digitalizados, null),
                          a!save(ri!refreshCount, ri!refreshCount + 1),
                          a!save(local!observaciones, null),
                          a!save(ri!mostrarGrid, true),

                        }
                      )
                    },
                    style: "SECONDARY",
                    /*disabled: a!isNullOrEmpty(local!observaciones)*/
                    /*disabled:if(and( a!isNullOrEmpty(local!observaciones),rule!SCDO_ALGUN_PENDIENTE(ri!digitalizados)=false),true,false)*/
                    disabled: if(
                     
                        a!isNullOrEmpty(local!observaciones),
                        true,
                        if(#"_a-0000eb09-d442-8000-e687-01ef9001ef90_8857303"(ri!digitalizados)=true,
                        true,false)
                    )
                  ),
                  #"SYSTEM_SYSRULES_ButtonWidget"(
                    label: "Rechazar",
                    icon: "times",
                    loadingIndicator: true,
                    value: true,
                    confirmHeader: "¿Desea Rechazar este reporte?",
                    confirmMessage: "El reporte pasará a estar en el apartado de Contratos Pendientes",
                    confirmButtonLabel: "Sí, Rechazar",
                    cancelButtonLabel: "Cancelar",
                    saveInto: {
                      local!rechazar,
                      #"SYSTEM_SYSRULES_startProcess"(
                        processModel: #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4780412",
                        processParameters: {
                          rechazado: local!rechazar,
                          reporte: ri!reporte
                        },
                        onSuccess: {
                          a!save(ri!mostrarDocumentos, false),
                          a!save(ri!reporte, null),
                          a!save(ri!documentacion, null),
                          a!save(ri!digitalizados, null),
                          a!save(ri!refreshCount, ri!refreshCount + 1),
                          a!save(ri!mostrarGrid, true),
                          a!save(local!observaciones, null)
                        }
                      )
                    },
                    submit: true,
                    style: "DESTRUCTIVE",
                    /*disabled: a!isNullOrEmpty(local!observaciones)*/
                    disabled: if(

                      a!isNullOrEmpty(local!observaciones),
                      true,
                      if(#"_a-0000eb09-d442-8000-e687-01ef9001ef90_8857303"(ri!digitalizados)=true,
                      true,false)
                    )
                  )
                },
                align: "START"
              )
            )
          },
          showWhen: a!isNullOrEmpty(ri!soloDocumentos)
        )
      },
      {
        #"SYSTEM_SYSRULES_sectionLayout_v1"(
          contents: {
            #"SYSTEM_SYSRULES_columnsLayout"(
              columns: {
                #"SYSTEM_SYSRULES_columnLayout"(),
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    if(
                      and(
                        local!decisionSeleccionada = "Rechazar",
                        or(
                          local!documentacionSeleccionada.estado = "P",
                          local!digitalizadoSeleccionado.estado = "P"
                        )
                      ),
                      {
                        #"SYSTEM_SYSRULES_richTextDisplayField"(
                          value: {
                            #"SYSTEM_SYSRULES_richTextHeader"(
                              text: "¿Está seguro de que desea rechazar este documento?",
                              size: "MEDIUM"
                            )
                          },
                          align: "CENTER",
                          marginAbove: "MORE",
                          marginBelow: "MORE"
                        )
                      },
                      if(
                        and(
                          local!decisionSeleccionada = "Aceptar",
                          or(
                            local!documentacionSeleccionada.estado = "A",
                            local!digitalizadoSeleccionado.estado = "A"
                          )
                        ),
                        {
                          #"SYSTEM_SYSRULES_richTextDisplayField"(
                            value: {
                              #"SYSTEM_SYSRULES_richTextHeader"(
                                text: concat(
                                  "Este Documento ya ha sido aceptado anteriormente por el usuario: ",
                                  local!documentacionSeleccionada.usuarioacepto,
                                  " el día: ",
                                  local!documentacionSeleccionada.fechaacepto
                                ),
                                size: "MEDIUM"
                              )
                            },
                            align: "CENTER",
                            marginAbove: "MORE",
                            marginBelow: "MORE"
                          )
                        },
                        if(
                          and(
                            local!decisionSeleccionada = "Rechazar",
                            or(
                              local!documentacionSeleccionada.estado = "A",
                              local!digitalizadoSeleccionado.estado = "A"
                            )
                          ),
                          {
                            #"SYSTEM_SYSRULES_richTextDisplayField"(
                              value: {
                                #"SYSTEM_SYSRULES_richTextHeader"(
                                  text: concat(
                                    "Este Documento ya ha sido aceptado anteriormente por el usuario: ",
                                    local!documentacionSeleccionada.usuarioacepto,
                                    " el día: ",
                                    local!documentacionSeleccionada.fechaacepto,
                                    ". ¿Desea rechazar este documento?"
                                  ),
                                  size: "MEDIUM"
                                )
                              },
                              align: "CENTER",
                              marginAbove: "MORE",
                              marginBelow: "MORE"
                            )
                          },
                          {
                            #"SYSTEM_SYSRULES_richTextDisplayField"(
                              value: {
                                #"SYSTEM_SYSRULES_richTextHeader"(
                                  text: "¿Está seguro de que desea aceptar este documento?",
                                  size: "MEDIUM"
                                )
                              },
                              align: "CENTER",
                              marginAbove: "MORE",
                              marginBelow: "MORE"
                            )
                          }
                        )
                      )
                    ),
                    /*a!richTextDisplayField(*/
                      /*value: a!richTextItem(*/
                        /*text: "En caso de no estar seguro puede ver nuevamente el documento aquí ",*/
                        /*link: a!documentDownloadLink()*/
                      /*),*/
                      /*align: "CENTER"*/
                    /*),*/
                    if(
                      and(
                        local!decisionSeleccionada = "Rechazar",
                        or(
                          local!documentacionSeleccionada.estado = "P",
                          local!digitalizadoSeleccionado.estado = "P"
                        )
                      ),
                      {
                        #"SYSTEM_SYSRULES_ButtonLayout"(
                          primaryButtons: {
                            #"SYSTEM_SYSRULES_ButtonWidget"(
                              label: "Sí, Rechazar",
                              value: true,
                              saveInto: {
                                local!decisionFinal,
                                if(
                                  a!isNotNullOrEmpty(local!documentacionSeleccionada),
                                  a!save(
                                    local!documentacionSeleccionada.estado,
                                    "R"
                                  ),
                                  a!save(
                                    local!digitalizadoSeleccionado.estado,
                                    "R"
                                  )
                                ),
                                #"SYSTEM_SYSRULES_startProcess"(
                                  processModel: #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4795736",
                                  processParameters: {
                                    cancel: false,
                                    decisionFinal: local!decisionFinal,
                                    decisionGrid2: local!decisionSeleccionada,
                                    documentacion: local!documentacionSeleccionada,
                                    digitalizado: local!digitalizadoSeleccionado
                                  },
                                  onSuccess: {
                                    if(
                                      a!isNullOrEmpty(fv!processInfo.pv.decisionFinal),
                                      {
                                        a!save(local!indicePagina, 1),
                                        a!save(local!decisionSeleccionada, null),
                                        a!save(local!documentacionSeleccionada, null),
                                        a!save(local!digitalizadoSeleccionado, null),
                                        a!save(local!indiceDocu, null),

                                      },
                                      if(
                                        and(
                                          toboolean(fv!processInfo.pv.decisionFinal) = true,
                                          local!decisionSeleccionada = "Rechazar",
                                          a!isNotNullOrEmpty(local!documentacionSeleccionada)
                                        ),
                                        {
                                          a!save(
                                            ri!documentacion,
                                            remove(ri!documentacion, local!indiceDocu)
                                          ),
                                          a!save(local!indicePagina, 1),
                                          a!save(local!decisionSeleccionada, null),
                                          a!save(local!documentacionSeleccionada, null),
                                          a!save(local!indiceDocu, null),

                                        },
                                        if(
                                          and(
                                            toboolean(fv!processInfo.pv.decisionFinal) = true,
                                            local!decisionSeleccionada = "Rechazar",
                                            a!isNotNullOrEmpty(local!digitalizadoSeleccionado)
                                          ),
                                          {
                                            /*a!save(ri!digitalizados, remove(ri!digitalizados, local!indiceDocu)),*/
                                            a!save(
                                              ri!digitalizados,
                                              #"_a-0000e9f5-96e6-8000-e641-01ef9001ef90_6495671"(
                                                contrato: ri!reporte.contrato,
                                                operacion: ri!reporte.operacion
                                              )
                                            ),
                                            a!save(
                                              ri!digitalizados_rechazados,
                                              #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4776405"(
                                                contrato: local!digitalizadoSeleccionado.contrato,
                                                operacion: local!digitalizadoSeleccionado.operacion
                                              )
                                            ),
                                            a!save(local!indicePagina, 1),
                                            a!save(local!decisionSeleccionada, null),
                                            a!save(local!digitalizadoSeleccionado, null),
                                            a!save(local!indiceDocu, null)
                                          },
                                          {}
                                        )
                                      )
                                    )
                                  },
                                  onError: {
                                    a!save(local!indicePagina, 1),
                                    a!save(local!decisionSeleccionada, null),
                                    a!save(local!documentacionSeleccionada, null),
                                    a!save(local!digitalizadoSeleccionado, null),

                                  }
                                )
                              },
                              submit: false,
                              style: "DESTRUCTIVE",
                              loadingIndicator: true
                            )
                          },
                          secondaryButtons: {
                            #"SYSTEM_SYSRULES_ButtonWidget"(
                              label: "Cancelar",
                              value: true,
                              saveInto: {
                                ri!mostrarDocumentos,
                                a!save(local!indicePagina, 1),
                                a!save(local!decisionSeleccionada, null),
                                a!save(local!documentacionSeleccionada, null),
                                a!save(local!digitalizadoSeleccionado, null),
                                a!save(local!indiceDocu, null),

                              },
                              submit: false,
                              style: "SECONDARY",
                              validate: false
                            )
                          }
                        )
                      },
                      if(
                        and(
                          local!decisionSeleccionada = "Aceptar",
                          or(
                            local!documentacionSeleccionada.estado = "A",
                            local!digitalizadoSeleccionado = "A"
                          )
                        ),
                        {
                          #"SYSTEM_SYSRULES_ButtonLayout"(
                            primaryButtons: {
                              #"SYSTEM_SYSRULES_ButtonWidget"(
                                label: "Aceptar",
                                icon: "check",
                                value: true,
                                saveInto: {
                                  a!save(local!indicePagina, 1),
                                  a!save(local!decisionSeleccionada, null),
                                  a!save(local!documentacionSeleccionada, null)
                                },
                                submit: false,
                                style: "PRIMARY",
                                loadingIndicator: true
                              )
                            }
                          )
                        },
                        {
                          #"SYSTEM_SYSRULES_ButtonLayout"(
                            primaryButtons: {
                              #"SYSTEM_SYSRULES_ButtonWidget"(
                                label: "Sí, Aceptar",
                                value: true,
                                saveInto: {
                                  local!decisionFinal,
                                  if(
                                    a!isNotNullOrEmpty(local!documentacionSeleccionada),
                                    a!save(
                                      local!documentacionSeleccionada.estado,
                                      "A"
                                    ),
                                    a!save(
                                      local!digitalizadoSeleccionado.estado,
                                      "A"
                                    )
                                  ),
                                  #"SYSTEM_SYSRULES_startProcess"(
                                    processModel: #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4795736",
                                    processParameters: {
                                      cancel: false,
                                      decisionFinal: local!decisionFinal,
                                      decisionGrid2: local!decisionSeleccionada,
                                      documentacion: local!documentacionSeleccionada,
                                      digitalizado: local!digitalizadoSeleccionado
                                    },
                                    onSuccess: {
                                      if(
                                        a!isNullOrEmpty(fv!processInfo.pv.decisionFinal),
                                        {
                                          a!save(local!indicePagina, 1),
                                          a!save(local!decisionSeleccionada, null),
                                          a!save(local!documentacionSeleccionada, null),
                                          a!save(local!indiceDocu, null)
                                        },
                                        if(
                                          and(
                                            toboolean(fv!processInfo.pv.decisionFinal) = true,
                                            local!decisionSeleccionada = "Aceptar",
                                            a!isNotNullOrEmpty(local!documentacionSeleccionada)
                                          ),
                                          {
                                            if(
                                              a!isNotNullOrEmpty(local!documentacionSeleccionada),
                                              {
                                                a!save(
                                                  ri!documentacion,
                                                  remove(ri!documentacion, local!indiceDocu)
                                                ),
                                                a!save(
                                                  ri!documentacion,
                                                  insert(
                                                    ri!documentacion,
                                                    local!documentacionSeleccionada,
                                                    local!indiceDocu
                                                  )
                                                ),
                                                a!save(local!indicePagina, 1),
                                                a!save(local!decisionSeleccionada, null),
                                                a!save(local!documentacionSeleccionada, null),
                                                a!save(local!indiceDocu, null)
                                              },
                                              {
                                                a!save(local!indicePagina, 1),
                                                a!save(local!decisionSeleccionada, null),
                                                a!save(local!documentacionSeleccionada, null),
                                                a!save(local!indiceDocu, null)
                                              }
                                            )
                                          },
                                          if(
                                            and(
                                              toboolean(fv!processInfo.pv.decisionFinal) = true,
                                              local!decisionSeleccionada = "Aceptar",
                                              a!isNotNullOrEmpty(local!digitalizadoSeleccionado)
                                            ),
                                            {
                                              a!save(
                                                ri!digitalizados,
                                                remove(ri!digitalizados, local!indiceDocu)
                                              ),
                                              a!save(
                                                ri!digitalizados,
                                                insert(
                                                  ri!digitalizados,
                                                  local!digitalizadoSeleccionado,
                                                  local!indiceDocu
                                                )
                                              ),
                                              a!save(local!indicePagina, 1),
                                              a!save(local!decisionSeleccionada, null),
                                              a!save(local!digitalizadoSeleccionado, null),
                                              a!save(local!indiceDocu, null)
                                            },
                                            {
                                              a!save(local!indicePagina, 1),
                                              a!save(local!decisionSeleccionada, null),
                                              a!save(local!digitalizadoSeleccionado, null),
                                              a!save(local!indiceDocu, null)
                                            }
                                          )
                                        )
                                      )
                                    },
                                    onError: {
                                      a!save(local!indicePagina, 1),
                                      a!save(local!decisionSeleccionada, null),
                                      a!save(local!documentacionSeleccionada, null),
                                      a!save(local!digitalizadoSeleccionado, null),
                                      a!save(local!indiceDocu, null),
                                      a!save(local!decisionFinal, null)
                                    }
                                  )
                                },
                                submit: false,
                                style: "PRIMARY",
                                loadingIndicator: true
                              )
                            },
                            secondaryButtons: {
                              #"SYSTEM_SYSRULES_ButtonWidget"(
                                label: "Cancelar",
                                value: true,
                                saveInto: {
                                  a!save(local!indicePagina, 1),
                                  a!save(local!decisionSeleccionada, null),
                                  a!save(local!documentacionSeleccionada, null),
                                  a!save(local!digitalizadoSeleccionado, null)
                                },
                                submit: false,
                                style: "SECONDARY",
                                validate: false
                              )
                            }
                          )
                        }
                      )
                    )
                  }
                ),
                #"SYSTEM_SYSRULES_columnLayout"()
              }
            ),

          }
        )
      }
    )
  }
)</definition>
        <namedTypedValue>
            <name>mostrarDocumentos</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>documentacion</name>
            <type>
                <name>scdo_documentacion?list</name>
                <namespace>urn:com:appian:types</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>reporte</name>
            <type>
                <name>cdo_reportes</name>
                <namespace>urn:com:appian:types</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>digitalizados</name>
            <type>
                <name>cdo_digitalizados?list</name>
                <namespace>urn:com:appian:types</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>soloDocumentos</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>reporteAprobado</name>
            <type>
                <name>cdo_reportes_aprobados</name>
                <namespace>urn:com:appian:types</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>refreshCount</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>mostrarGrid</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>digitalizados_rechazados</name>
            <type>
                <name>cdo_digitalizados_rechazados?list</name>
                <namespace>urn:com:appian:types</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>mostrarDocumentos</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:nameRef>documentacion</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:n1="urn:com:appian:types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="n1:cdo_reportes"/>
                    <a:nameRef>reporte</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:nameRef>digitalizados</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">null()</a:value>
                    <a:nameRef>soloDocumentos</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:n1="urn:com:appian:types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="n1:cdo_reportes_aprobados"/>
                    <a:nameRef>reporteAprobado</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:int"/>
                    <a:nameRef>refreshCount</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>mostrarGrid</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:nameRef>digitalizados_rechazados</a:nameRef>
                    <a:id>9</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e8a9-7b47-8000-e5e7-01ef9001ef90_2275471"/>
        <historyInfo versionUuid="_a-0000ea2e-319c-8000-e644-01ef9001ef90_6849825"/>
        <historyInfo versionUuid="_a-0000ea52-e6d5-8000-e654-01ef9001ef90_7548118"/>
        <historyInfo versionUuid="_a-0000eabf-35e2-8000-e683-01ef9001ef90_8429709"/>
        <historyInfo versionUuid="_a-0000eb09-d442-8000-e687-01ef9001ef90_8861459"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9390666"/>
    </history>
</contentHaul>
