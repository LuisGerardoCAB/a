<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000ec5b-dce3-8000-e69f-01ef9001ef90_10137489</versionUuid>
    <interface>
        <name>SCDO_DocumentacionC</name>
        <uuid>_a-0000e878-569a-8000-e5e4-01ef9001ef90_2260035</uuid>
        <description>Interfaz con la tabla Documentación Contrato</description>
        <parentUuid>_a-0000e801-560f-8000-e5d9-01ef9001ef90_1707049</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  local!fechaalDrop,
  local!imagen,
  local!fechaDrop,
  local!docs_actualizados,
  local!docs_actualizar,
  local!documento_rechazo,
  local!motivo_rechazo,
  local!ver_motivo: false,
  local!doc,
  local!ccostos,
  local!contrato,
  local!FechaDividida,
  local!FechaalDividida,
  local!Fechal,
  local!fecha,
  local!estado,
  local!refreshCount: 0,
  local!documentos: index(#"_a-0000e8d8-9b98-8000-e605-01ef9001ef90_2694147"(documentaa: "CONTRATO"),"data", null),
  local!iddocumento,
  local!estadocc,
  /*local!documento,*/
  {
    #"SYSTEM_SYSRULES_ButtonArrayLayout"(
      buttons: {
        #"SYSTEM_SYSRULES_buttonWidget_v1"(
          label: "Limpiar",
          style: "GHOST",
          saveInto: {
            a!save(
              {
                local!estado,
                local!estadocc,
                local!iddocumento,
                local!ccostos,
                local!contrato,
                local!fecha,
                local!FechaDividida,
                local!Fechal,
                local!FechaalDividida,
                local!fechaDrop,
                local!fechaalDrop,
                local!doc,
                local!imagen
              },
              null
            )
          }
        )
      },
      align: "START"
    ),
    #"SYSTEM_SYSRULES_sideBySideLayout"(
      items: {
        #"SYSTEM_SYSRULES_sideBySideItem"(
          item: #"SYSTEM_SYSRULES_dropdownField_v1"(
            choiceLabels: { "Pendiente", "Aceptado" },
            choiceValues: { "P", "A" },
            label: "Estado",
            labelPosition: "ABOVE",
            placeholder: "--- Select a Value ---",
            value: local!estado,
            saveInto: { local!estado, a!save(local!doc, null) },
            searchDisplay: "AUTO",
            disabled: a!isNotNullOrEmpty(local!imagen),
            validations: {}
          )
        ),
        #"SYSTEM_SYSRULES_sideBySideItem"(
          item: #"SYSTEM_SYSRULES_dropdownField_v1"(
            choiceLabels: {
              "VIGENTE",
              "VIGENTE POR REVISAR",
              "IRREGULAR FALTA CPI"
            },
            choiceValues: {
              "VIGENTE",
              "VIGENTE POR REVISAR",
              "IRREGULAR FALTA CPI"
            },
            label: "Estado CC",
            labelPosition: "ABOVE",
            placeholder: "--- Select a Value ---",
            value: local!estadocc,
            saveInto: { local!estadocc, a!save(local!doc, null) },
            searchDisplay: "AUTO",
            validations: {}
          )
        ),
        #"SYSTEM_SYSRULES_sideBySideItem"(
          item: #"SYSTEM_SYSRULES_dropdownField_v1"(
            choiceLabels:index( local!documentos,"documento",{}),
            choiceValues: index(local!documentos,"iddocumento",{}),
            label: "Documento",
            labelPosition: "ABOVE",
            placeholder: "--- Select a Value ---",
            value: local!iddocumento,
            saveInto: {
              local!iddocumento,
              a!save(local!doc, null)
            },
            searchDisplay: "AUTO",
            validations: {}
          )
        ),
        #"SYSTEM_SYSRULES_sideBySideItem"(
          item: #"SYSTEM_SYSRULES_checkboxField_v1"(
            label: "",
            labelPosition: "ABOVE",
            choiceLabels: { "Imagen" },
            choiceValues: { 1 },
            value:local!imagen,
            saveInto: {local!imagen,
            if(a!isNotNullOrEmpty(local!imagen),
            a!save(local!estado,"P"),           
            a!save(local!estado,null)
            )

            },
            validations: {}
          )
        )
      }
    ),
    #"SYSTEM_SYSRULES_sideBySideLayout"(
      items: {
        #"SYSTEM_SYSRULES_sideBySideItem"(
          item: #"SYSTEM_SYSRULES_textField"(
            label: "C. de Costos:",
            labelPosition: "ABOVE",
            instructions: "Agregar Centro de Costos",
            value: { local!ccostos },
            saveInto: { local!ccostos, a!save(local!doc, null) },
            validations: {}
          ),
          width: "AUTO"
        ),
        #"SYSTEM_SYSRULES_sideBySideItem"(
          item: #"SYSTEM_SYSRULES_textField"(
            label: "Contrato:",
            labelPosition: "ABOVE",
            instructions: "Agregar contrato de 11 digitos",
            value: { local!contrato },
            saveInto: { local!contrato, a!save(local!doc, null) },
            refreshAfter: "KEYPRESS",
            validations: {
              if(
                len(local!contrato) &lt;= 11,
                null,
                "Ingresar menos de 11 digitos"
              )
            }
          ),
          width: "AUTO"
        ),
        #"SYSTEM_SYSRULES_sideBySideItem"(
          item: #"SYSTEM_SYSRULES_dateField"(
            label: "Fecha de:",
            labelPosition: "ABOVE",
            value: /*local!Fecha,*/local!fechaDrop,
            saveInto: {
              local!fechaDrop,
              a!save(
                local!fecha,
                if(a!isNotNullOrEmpty( local!fechaDrop),
                text( date(year((local!fechaDrop)),month((local!fechaDrop)), day((local!fechaDrop))),"dd/mm/yyyy"),
                null
                )

              ),
              a!save(
                local!FechaDividida,
                if(a!isNotNullOrEmpty(local!fecha),
                split(local!fecha, "/"),
                null
                )

              ),
              /*local!Fecha,*/
              /*a!save(*/
                /*local!FechaDividida,*/
                /*if(*/
                  /*a!isNullOrEmpty(local!fecha),*/
                  /*{},*/
                  /*split(local!Fecha, "/")*/
                /*)*/
              /*),*/
              a!save(local!doc, null)
            },
            validations: {
              a!match(
                value:  and(a!isNotNullOrEmpty(local!fechaDrop),a!isNotNullOrEmpty(local!fechaalDrop)),
                equals: false(),
                then:  "",
                whenTrue: local!fechaDrop &gt; local!fechaalDrop,
                then: "La fecha al debe ser mayor que la fecha de",
                default:  ""
              )
            }
          ),
          width: "AUTO"
        ),
        #"SYSTEM_SYSRULES_sideBySideItem"(
          item: #"SYSTEM_SYSRULES_dateField"(
            label: "al:",
            labelPosition: "ABOVE",
            value: /*local!Fechal,*/local!fechaalDrop,
            saveInto: {
              local!fechaalDrop,
              a!save(
                local!Fechal,
                if(a!isNotNullOrEmpty( local!fechaalDrop),
                text( date(year((local!fechaalDrop)),month((local!fechaalDrop)), day((local!fechaalDrop))),"dd/mm/yyyy"),
                null
                )

              ),
              a!save(
                local!FechaalDividida,
                if(a!isNotNullOrEmpty(local!Fechal),
                split(local!Fechal, "/"),
                null
                )

              ),
              
              a!save(local!doc, null)
            },
            validations: {
              a!match(
                value:  and(a!isNotNullOrEmpty(local!fechaDrop),a!isNotNullOrEmpty(local!fechaalDrop)),
                equals: false(),
                then:  "",
                whenTrue: local!fechaDrop &gt; local!fechaalDrop,
                then: "La fecha al debe ser mayor que la fecha de",
                default:  ""
              )
            },
            align: "LEFT"
          ),
          width: "AUTO"
        )
      }
    ),
    #"SYSTEM_SYSRULES_columnsLayout"(
      columns: {
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: {
            #"_a-0000ea2e-319c-8000-e644-01ef9001ef90_6808396"(
              documento_doc: local!doc,
              ccostos: local!ccostos,
              contrato: local!contrato,
              fechaDividida: local!FechaDividida,
              fechaFin: local!fechaalDrop,
              fechaInicio: local!fechaDrop,
              fechaalDividida: local!FechaalDividida,
              estado: local!estado,
              estadoCC: local!estadocc,
              catDoc: local!iddocumento,
              imagen:local!imagen
            )
          }
        ),
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: {
            #"SYSTEM_SYSRULES_paragraphField"(
              label: "Motivo Rechazo:",
              labelPosition: "ABOVE",
              value: local!motivo_rechazo,
              saveInto: local!motivo_rechazo,
              refreshAfter: "UNFOCUS",
              height: "MEDIUM",
              showWhen: local!ver_motivo,
              validations: {}
            )
          }
        ),
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: {
            #"SYSTEM_SYSRULES_ButtonArrayLayout"(
              buttons: {
                #"SYSTEM_SYSRULES_buttonWidget_v1"(
                  label: "Rechazar",
                  style: "GHOST",
                  saveInto: {
                    #"SYSTEM_SYSRULES_startProcess"(
                      processModel: #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4795736",
                      processParameters: {
                        decisionFinal: true,
                        cancel: false,
                        decisionGrid2: "Rechazar",
                        motivo_rechazo: local!motivo_rechazo,
                        documentacion: local!documento_rechazo,
                        actualizar_doc_fisicos: local!docs_actualizados
                      },
                      onSuccess: {
                        a!save(
                          local!refreshCount,
                          local!refreshCount + 1
                        )
                      },
                      onError: #"SYSTEM_SYSRULES_httpResponse_v1"(
                        statusCode: 500,
                        headers: {
                          #"SYSTEM_SYSRULES_httpHeader"(
                            name: "Content-Type",
                            value: "application/json"
                          )
                        },
                        body: #"SYSTEM_SYSRULES_toJson_v1"(
                          {
                            error: "Ocurrió un error durante el proceso."
                          }
                        )
                      )
                    ),
                    a!save(local!ver_motivo, false),
                    a!save(local!motivo_rechazo, null)
                  },
                  loadingIndicator: true
                )
              },
              align: "START"
            ),
            #"SYSTEM_SYSRULES_ButtonArrayLayout"(
              buttons: {
                #"SYSTEM_SYSRULES_buttonWidget_v1"(
                  label: "Cancelar",
                  style: "GHOST",
                  saveInto: {
                    a!save(local!ver_motivo, false),
                    a!save(local!motivo_rechazo, null)
                  }
                )
              },
              align: "START"
            )
          },
          showWhen: local!ver_motivo
        )
      }
    ),
    #"SYSTEM_SYSRULES_columnsLayout"(
      columns: {
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: {
            #"SYSTEM_SYSRULES_gridField_v2"(
              label: "Tabla de solo lectura",
              labelPosition: "ABOVE",
              data: #"SYSTEM_SYSRULES_queryEntity_v2"(
                entity: #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4743848",
                query: #"SYSTEM_SYSRULES_query"(
                 
                  logicalExpression: #"SYSTEM_SYSRULES_queryLogicalExpression"(
                    operator: "AND",
                    filters: {
                      #"SYSTEM_SYSRULES_queryFilter"(
                        field: "fechacarga",
                        operator: "=",
                        value: if(
                          and(
                            a!isNotNullOrEmpty(local!FechaDividida),
                            length(local!FechaDividida) &gt; 2
                          ),
                          date(tointeger(local!FechaDividida[3]),tointeger(local!FechaDividida[2]),tointeger(local!FechaDividida[1])),
                         
                          null
                        ),
                        applywhen: and(
                          a!isNullOrEmpty(local!Fechal),
                          a!isNotNullOrEmpty(local!fecha)
                        )
                      ),
                      #"SYSTEM_SYSRULES_queryFilter"(
                        field: "fechacarga",
                        operator: "&lt;=",
                        value: if(
                          and(
                            a!isNotNullOrEmpty(local!FechaalDividida),
                            length(local!FechaalDividida) &gt; 2
                          ),
                          date(tointeger(local!FechaalDividida[3]),tointeger(local!FechaalDividida[2]),tointeger(local!FechaalDividida[1])),
                          
                          null
                        ),
                        applywhen: and(
                          a!isNotNullOrEmpty(local!Fechal),
                          isnull(local!fecha)
                        )
                      ),
                      if(
                        and(
                          a!isNotNullOrEmpty(local!Fechal),
                          a!isNotNullOrEmpty(local!Fecha)
                        ),
                        if(
                          (local!fechaDrop) &lt; (local!fechaalDrop),
                          {
                            #"SYSTEM_SYSRULES_queryFilter"(
                              field: "fechacarga",
                              operator: "&lt;=",
                              value: if(
                                and(
                                  a!isNotNullOrEmpty(local!FechaalDividida),
                                  a!isNotNullOrEmpty(local!FechaDividida),
                                  (local!fechaDrop) &lt; (local!fechaalDrop),
                                  length(local!FechaalDividida) &gt; 2
                                ),
                                date(tointeger(local!FechaalDividida[3]),tointeger(local!FechaalDividida[2]),tointeger(local!FechaalDividida[1])),
                                
                                null
                              )
                            ),
                            #"SYSTEM_SYSRULES_queryFilter"(
                              field: "fechacarga",
                              operator: "&gt;=",
                              value: if(
                                and(
                                  a!isNotNullOrEmpty(local!FechaDividida),
                                  a!isNotNullOrEmpty(local!FechaalDividida),
                                  (local!fechaDrop) &lt; (local!fechaalDrop),
                                  length(local!FechaDividida) &gt; 2
                                ),
                                date(tointeger(local!FechaDividida[3]),tointeger(local!FechaDividida[2]),tointeger(local!FechaDividida[1])),
                                
                                null
                              )
                            )
                          },
                          if(
                            (local!fechaDrop) = (local!fechaalDrop),
                            {
                              #"SYSTEM_SYSRULES_queryFilter"(
                                field: "fechacarga",
                                operator: "=",
                                value: if(
                                  and(
                                    a!isNotNullOrEmpty(local!FechaDividida),
                                    length(local!FechaDividida) &gt; 2
                                  ),
                                  date(tointeger(local!FechaDividida[3]),tointeger(local!FechaDividida[2]),tointeger(local!FechaDividida[1])),
                                  
                                  null
                                )
                              )
                            },
                            {
                              #"SYSTEM_SYSRULES_queryFilter"(
                                field: "fechacarga",
                                operator: "&gt;=",
                                value: if(
                                  and(
                                    a!isNotNullOrEmpty(local!FechaDividida),
                                    a!isNotNullOrEmpty(local!FechaalDividida),
                                    (local!fechaDrop) &gt; (local!fechaalDrop),
                                    length(local!FechaDividida) &gt; 2
                                  ),
                                  null,
                                  null
                                )
                              )
                            }
                          )
                        ),
                        {}
                      ),
                      #"SYSTEM_SYSRULES_queryFilter"(
                        field: "contrato",
                        operator: "=",
                        value: local!contrato
                      ),
                      #"SYSTEM_SYSRULES_queryFilter"(
                        field: "iddocumento",
                        operator: "=",
                        value: local!iddocumento
                      ),
                      #"SYSTEM_SYSRULES_queryFilter"(
                        field: "cc",
                        operator: "=",
                        value: local!ccostos
                      ),
                      #"SYSTEM_SYSRULES_queryFilter"(
                        field: "castdsc",
                        operator: "=",
                        value: local!estadocc
                      ),
                      #"SYSTEM_SYSRULES_queryFilter"(
                        field: "estado",
                        operator: "=",
                        value: local!estado
                      ),
                      #"SYSTEM_SYSRULES_queryFilter"(
                        field: "nomdocumento",
                        operator: "&lt;&gt;",
                        value: "No Disponible.png",
                        applyWhen:a!isNotNullOrEmpty(local!imagen)
                      ),
                      #"SYSTEM_SYSRULES_queryFilter"(
                        field: "nomdocumento",
                        operator: "&lt;&gt;",
                        value: "Sin Imagen.png",
                        applyWhen:a!isNotNullOrEmpty(local!imagen)
                      )
                    },
                    ignoreFiltersWithEmptyValues: true
                  ),
                  pagingInfo: fv!pagingInfo
                ),
                fetchTotalCount: true
              ),
              columns: {
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Formato",
                  value: if(
                    a!isNotNullOrEmpty(
                      #"_a-0000ea97-682f-8000-e67f-01ef9001ef90_8167551"(fv!row.nomdocumento)
                    ),
                    #"SYSTEM_SYSRULES_richTextDisplayField"(
                      labelPosition: "COLLAPSED",
                      value: {
                        if(
                          #"_a-0000ea97-682f-8000-e67f-01ef9001ef90_8167551"(fv!row.nomdocumento) = "excel",
                          #"SYSTEM_SYSRULES_richTextIcon"(icon: "file-excel", color: "#ff0000"),
                          if(
                            #"_a-0000ea97-682f-8000-e67f-01ef9001ef90_8167551"(fv!row.nomdocumento) = "pdf",
                            #"SYSTEM_SYSRULES_richTextIcon"(icon: "file-pdf", color: "#ff0000"),
                            if(
                              #"_a-0000ea97-682f-8000-e67f-01ef9001ef90_8167551"(fv!row.nomdocumento) = "txt",
                              #"SYSTEM_SYSRULES_richTextIcon"(icon: "file-text", color: "#ff0000"),
                              if(
                                #"_a-0000ea97-682f-8000-e67f-01ef9001ef90_8167551"(fv!row.nomdocumento) = "imagen",
                                #"SYSTEM_SYSRULES_richTextIcon"(icon: "file-image", color: "#ff0000"),
                                "NO"
                              )
                            )
                          )
                        )
                      },
                      align: "CENTER"
                    ),
                    "-"
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Contrato",
                  sortField: "contrato",
                  value: if(
                    a!isNullOrEmpty(fv!row.contrato),
                    "-",
                    fv!row.contrato
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Cliente",
                  sortField: "cliente",
                  value: if(
                    a!isNullOrEmpty(fv!row.cliente),
                    "-",
                    a!match(
    value: index(
      decrypttext(
        valueToDecrypt: index(fv!row, "cliente", null),
        iv: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021470",
        scsKey: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021476"
      ),
      "success",
      null
    ),
    equals: true,
    then: index(
      decrypttext( valueToDecrypt:
      index(fv!row, "cliente", null),
      iv: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021470",
      scsKey: #"_a-0000ec31-ac7e-8000-e69b-01ef9001ef90_10021476"
      ),
      "value",
      null
    ),
    equals: false,
    then: index(fv!row, "cliente", null),
    default: "-"
  )
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "ADF",
                  sortField: "adf",
                  value: if(
                    a!isNotNullOrEmpty(fv!row.adf),
                    #"SYSTEM_SYSRULES_richTextDisplayField"(
                      labelPosition: "COLLAPSED",
                      value: {
                        #"SYSTEM_SYSRULES_richTextIcon"(icon: "files-solid", color: "#ff0000")
                      },
                      align: "CENTER"
                    ),
                    "-"
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Nombre",
                  sortField: "documento",
                  /*value: fv!row.nomdocumento,*/
                  value: if(
                    a!isNullOrEmpty(fv!row.documento),
                    "-",
                    fv!row.documento
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Fecha de Carga",
                  sortField: "fechadeCarga",
                  value: 
                  if(
                    a!isNullOrEmpty(fv!row.fechacarga),
                    "-",
                    text(fv!row.fechacarga,"dd/mm/yyyy")
                    
                   
                    
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Usuario Cargó",
                  sortField: "usuariocargo",
                  value: if(
                    a!isNullOrEmpty(fv!row.usuariocargo),
                    "-",
                    fv!row.usuariocargo
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "C.Costos",
                  sortField: "cc",
                  value: if(
                    a!isNullOrEmpty(fv!row.cc),
                    "-",
                    fv!row.cc
                  ),

                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Perfil",
                  sortField: "profile",
                  value: if(
                    a!isNullOrEmpty(fv!row.profile),
                    "-",
                    fv!row.profile
                  ),

                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Estado CCC",
                  sortField: "castdsc",
                  value: if(
                    a!isNullOrEmpty(fv!row.castdsc),
                    "-",
                    fv!row.castdsc
                  ),

                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Fecha Mod CCC",
                  sortField: "max",
                  value: if(
                    a!isNullOrEmpty(fv!row.max),
                    "-",
                    text( todate(fv!row.max),"dd/mm/yyyy")
                   
                  ),

                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Estado CDO",
                  sortField: "estado",
                  value: if(
                    a!isNullOrEmpty(fv!row.estado),
                    "-",
                    if(
                      fv!row.estado = "P",
                      #"SYSTEM_SYSRULES_richTextDisplayField"(
                        value: #"SYSTEM_SYSRULES_richTextItem_v1"(
                          text: "Pendiente",
                          color: "NEGATIVE",
                          style: "STRONG"
                        )
                      ),
                      #"SYSTEM_SYSRULES_richTextDisplayField"(
                        value: #"SYSTEM_SYSRULES_richTextItem_v1"(
                          text: "Aceptado",
                          color: "POSITIVE",
                          style: "STRONG"
                        )
                      )
                    )
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Usuario Acepto",
                  sortField: "usuarioacepto",
                  value: if(
                    a!isNullOrEmpty(fv!row.usuarioacepto),
                    "-",
                    fv!row.usuarioacepto
                  ),

                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Fecha Aceptado CDO",
                  sortField: "fechaacepto",
                  value: if(
                    a!isNullOrEmpty(fv!row.fechaacepto),
                    "-",
                    text(fv!row.fechaacepto,"dd/mm/yyyy")
                    
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Ver",
                 
                  value:
                 
                 a!localVariables(
                   local!documento_descargar,
                   local!busque:false,
                   #"SYSTEM_SYSRULES_richTextDisplayField"(
                     labelPosition: "COLLAPSED",
                     value: {
                       #"SYSTEM_SYSRULES_richTextIcon"(
                         icon: "eye",
                         link:{


                           #"SYSTEM_SYSRULES_dynamicLink"(
                             saveInto: {

                               #"SYSTEM_SYSRULES_startProcess"(
                                 processModel: #"_a-0000eabf-35e2-8000-e683-01ef9001ef90_8425441",
                                 processParameters: {
                                   nombre_doc: fv!row.nomdocumento
                                 },
                                 onSuccess: {
                                   a!save(
                                     local!documento_descargar,

                                     fv!processInfo.pv.documento

                                   ),
                                   a!save(
                                     local!busque,

                                     true

                                   )


                                 }
                               )

                             }
                           ) 


                         },

                         linkStyle: "STANDALONE"
                       ),
                       if(local!busque=false,
                       "",
                       if(and(local!busque,a!isNotNullOrEmpty(local!documento_descargar)),
                       #"SYSTEM_SYSRULES_richTextIcon"(
                         icon: "download",
                         caption:"Descargar documento.",
                         link:{

                           #"SYSTEM_SYSRULES_documentDownloadLink"(
                             document: local!documento_descargar

                           ) 


                         },

                         linkStyle: "STANDALONE"
                       ),
                       #"SYSTEM_SYSRULES_richTextIcon"(
                         icon: "exclamation",
                         caption:"Ha ocurrido un error al obtener el documento.",


                         linkStyle: "STANDALONE"
                       )
                       )
                       )
                       

                     }
                   )
                 ),
                  
                 
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Aceptar",
                  value: if(
                    fv!row.Estado = "P",
                    #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                      buttons: {
                        #"SYSTEM_SYSRULES_buttonWidget_v1"(
                          style: "LINK",
                          saveInto: {
                            #"SYSTEM_SYSRULES_startProcess"(
                              processModel: #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4795736",
                              processParameters: {
                                decisionFinal: true,
                                cancel: false,
                                decisionGrid2: "Aceptar",
                                documentacion: index(#"_a-0000e8b2-d897-8000-e5f1-01ef9001ef90_2372887"(iddocumentacion: fv!row.Iddocumentacion, paginInfo: 
                                #"SYSTEM_SYSRULES_pagingInfo"(startIndex: 1, batchSize: 1)),"data", null),

                              },
                              onSuccess: {
                                a!save(
                                  local!refreshCount,
                                  local!refreshCount + 1
                                )
                              },
                              onError: {
                                a!save(
                                  local!refreshCount,
                                  local!refreshCount + 1
                                )
                              }
                            )
                          },
                          size: "SMALL",
                          confirmHeader: "¿Está seguro de que desea aceptar esta documentación del contrato: " &amp; fv!row.Contrato &amp; "?",
                          confirmButtonLabel: "Si, Aceptar",
                          cancelButtonLabel: "Cancelar",
                          icon: "check-circle",
                          loadingIndicator: true
                        )
                      },
                      align: "CENTER"
                    ),
                    {}
                  ),
                  align: "CENTER"
                ),
                #"SYSTEM_SYSRULES_gridColumn"(
                  label: "Rechazar",
                  value: if(
                    fv!row.Estado = "P",
                    #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                      buttons: {
                        #"SYSTEM_SYSRULES_buttonWidget_v1"(
                          style: "LINK",
                          saveInto: {
                            a!save(local!ver_motivo, true),
                            a!save(
                              local!documento_rechazo,
                              index(#"_a-0000e8b2-d897-8000-e5f1-01ef9001ef90_2372887"(iddocumentacion: fv!row.Iddocumentacion), "data", null)
                            ),
                            a!save(
                              local!docs_actualizar,
                              #"_a-0000e982-d80b-8000-e63b-01ef9001ef90_4749073"(
                                iddocumento: local!documento_rechazo.iddocumento,
                                contrato: local!documento_rechazo.contrato
                              )
                            ),
                            a!save(
                              local!docs_actualizados,
                              #"_a-0000eaa5-8248-8000-e681-01ef9001ef90_8195592"(docs_fisicos: local!docs_actualizar)
                            )
                           

                          },
                          size: "SMALL",
                          confirmHeader: "¿Está seguro de que desea rechazar esta documentación del contrato: " &amp; fv!row.Contrato &amp; "?",
                          confirmButtonLabel: "Si, Rechazar",
                          cancelButtonLabel: "Cancelar",
                          icon: "times",
                          loadingIndicator: true
                        )
                      },
                      align: "CENTER"
                    ),
                    {}
                  ),
                  align: "CENTER"
                )
              },
              initialSorts: #"SYSTEM_SYSRULES_sortInfo"(field: "iddocumentacion", ascending: false),
              validations: {},
              refreshAlways: true,
              refreshOnReferencedVarChange: true,
              refreshOnVarChange: local!refreshCount
            )
          }
        )
      }
    )
  }
)</definition>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <history>
        <historyInfo versionUuid="_a-0000e8b2-d897-8000-e5f1-01ef9001ef90_2378004"/>
        <historyInfo versionUuid="_a-0000ea2e-319c-8000-e644-01ef9001ef90_6822187"/>
        <historyInfo versionUuid="_a-0000ea52-e6d5-8000-e654-01ef9001ef90_7546597"/>
        <historyInfo versionUuid="_a-0000eaa5-8248-8000-e681-01ef9001ef90_8246791"/>
        <historyInfo versionUuid="_a-0000eabf-35e2-8000-e683-01ef9001ef90_8433164"/>
        <historyInfo versionUuid="_a-0000eb09-d442-8000-e687-01ef9001ef90_8969894"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9387621"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9450742"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9465523"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9499093"/>
        <historyInfo versionUuid="_a-0000eb9b-4ec6-8000-e68b-01ef9001ef90_9589194"/>
        <historyInfo versionUuid="_a-0000ec5b-dce3-8000-e69f-01ef9001ef90_10132536"/>
        <historyInfo versionUuid="_a-0000ec5b-dce3-8000-e69f-01ef9001ef90_10137489"/>
    </history>
</contentHaul>
