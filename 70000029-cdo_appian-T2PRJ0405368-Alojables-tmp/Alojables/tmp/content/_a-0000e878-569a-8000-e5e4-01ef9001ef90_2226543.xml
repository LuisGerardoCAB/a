<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000ec5b-dce3-8000-e69f-01ef9001ef90_10126765</versionUuid>
    <interface>
        <name>SCDO_GridOpics</name>
        <uuid>_a-0000e878-569a-8000-e5e4-01ef9001ef90_2226543</uuid>
        <description>Interfaz con la tabla para los usuarios opics para SCDO.</description>
        <parentUuid>_a-0000e801-560f-8000-e5d9-01ef9001ef90_1707049</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  
  /*------------------*/

  local!showInformationBanner: true,
  local!showInformationBanner_actualizar: true,
  local!showInformationBanner_eliminar: true,

  /*correcto*/
  local!flag: now(),
  local!showWhen: a!refreshVariable(
    value: now() &lt; local!flag,
    refreshInterval: 0.5
  ),
  /*-----*/

  /*error*/
  local!flag_error: now(),
  
  local!showWhen_error: a!refreshVariable(
    value: now() &lt; local!flag_error,
    /* especifique el intervalo después de cuántos minutos desea finalizar el examen */
    refreshInterval: 0.5
  ),
  /*------*/

  /*correcto_actualizar*/
  local!flag_actualizar: now(),
  local!showWhen_actualizar: a!refreshVariable(
    value: now() &lt; local!flag_actualizar,
    refreshInterval: 0.5
  ),
  /*-----*/

  /*error_actualizasr*/
  local!flag_error_actualizar: now(),
  local!showWhen_error_actualizar: a!refreshVariable(
    value: now() &lt; local!flag_error_actualizar,
    /* especifique el intervalo después de cuántos minutos desea finalizar el examen */
    refreshInterval: 0.5
  ),
  /*------*/

  /*correcto_eliminar*/
  local!flag_eliminar: now(),
  local!showWhen_eliminar: a!refreshVariable(
    value: now() &lt; local!flag_eliminar,
    refreshInterval: 0.5
  ),
  /*-----*/

  /*error_elimianr*/
  local!flag_error_eliminar: now(),
  local!showWhen_error_eliminar: a!refreshVariable(
    value: now() &lt; local!flag_error_eliminar,
    /* especifique el intervalo después de cuántos minutos desea finalizar el examen */
    refreshInterval: 0.5
  ),
  /*------*/
  /*-------------------*/
  local!colorEdit: "#0032E6",
  local!colorDV: "#EC0000",
  /*Color para validaciones y boton eliminar*/
  /*local!colorCard: "#CC0000",*/
  local!colorSave: "#1F8926",
  local!criterio,
  local!criterioT,
  local!startIndex: 1,
  local!batchSize: 5,
  local!mostrarSuccess: false,
  local!mostrarEliminar: false,
  local!usuarioGuardado,
  local!usuarioOpicGrid: a!refreshVariable(
    value: #"SYSTEM_SYSRULES_queryEntity_v2"(
      entity: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2114138",
      query: #"SYSTEM_SYSRULES_query"(
        logicalexpression: #"SYSTEM_SYSRULES_queryLogicalExpression"(
          operator: "OR",
          filters: {
            #"SYSTEM_SYSRULES_queryFilter"(
              field: "usuarioopics",
              operator: "includes",
              value: local!criterio,
              applywhen: a!isNotNullOrEmpty(local!criterio)
            ),

          },
          ignorefilterswithemptyvalues: false
        ),
        paginginfo: #"SYSTEM_SYSRULES_pagingInfo"(
          startIndex: local!startIndex,
          batchSize: local!batchSize,
          sort: #"SYSTEM_SYSRULES_sortInfo"(field: "idusuarioopics", ascending: false)
        )
      ),
      fetchtotalcount: true
    ),
    /*refreshAlways: true,*/
    refreshOnVarChange: ri!refreshCount
  ),
  local!usuariosOpicsEditar: #"SYSTEM_SYSRULES_forEach"(
    items: index(local!usuarioOpicGrid,"data",null),
    expression: 'type!{urn:com:appian:types}cdo_usuariosopics'(idusuarioopics: index(fv!item, "idusuarioopics", null), 
    usuarioopics: index(fv!item, "usuarioopics", null),  idsegmento: index(fv!item, "idsegmento", null))
  ),
  local!segmentos: 
  a!refreshVariable(
    value: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2233353"(idSegmento: null),
    /*refreshAlways: true*/
    refreshOnVarChange: ri!refreshCount
  ),
  /*rule!SCDO_getSegmentoByFilters(idSegmento: null),*/
  local!usuarioSeleccionado,
  local!usuarioNuevo: 'type!{urn:com:appian:types}cdo_usuariosopics'(),
  local!editGrid,

  {
    #"SYSTEM_SYSRULES_boxLayout"(
      label: "Agregar Nuevo Usuario Opics",
      contents: {
        #"SYSTEM_SYSRULES_columnLayout"(
          contents: {
            #"SYSTEM_SYSRULES_ButtonArrayLayout"(
              buttons: {
                #"SYSTEM_SYSRULES_ButtonWidget"(
                  icon: "refresh",
                  /*tooltip: "Actualizar Tabla",*/
                  saveInto: a!save(
                    ri!refreshCount,
                    ri!refreshCount + 1
                  ),
                  size: "SMALL",
                  style: "SECONDARY",
                  loadingIndicator: true
                )
              },
              align: "START"
            )
          },
          width: "EXTRA_NARROW"
        ),
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_textField"(
                  label: "Usuario: ",
                  labelPosition: "ABOVE",
                  value: local!usuarioNuevo.usuarioopics,
                  saveInto: {
                    a!save(
                      local!usuarioNuevo.usuarioopics,
                      trim((save!value))
                    )
                  },
                  refreshAfter: "KEYPRESS",
                  validations: {}
                )
              },
              width: "AUTO"
            ),
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_dropdownField_v1"(
                  label: "Segmento: ",
                  labelPosition: "ABOVE",
                  placeholder: "--- Seleccione un valor ---",
                  choiceLabels: index(local!segmentos,"data", "segmento", {}),
                  choiceValues: index(local!segmentos,"data", "idsegmento", {}),
                  value: local!usuarioNuevo.idsegmento,
                  saveInto: local!usuarioNuevo.idsegmento,
                  searchDisplay: "AUTO",
                  validations: {}
                )
              }
            ),
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                  buttons: {
                    #"SYSTEM_SYSRULES_ButtonWidget"(
                      label: "Guardar",
                      loadingIndicator: true,
                      icon: "save",
                      saveInto: {
                        #"SYSTEM_SYSRULES_startProcess"(
                          processModel: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2244852",
                          processParameters: {
                            usuarioopics: local!usuarioNuevo,
                            delete: false,
                            accion:"insertó"
                          },
                          onSuccess: {
                            a!save(local!showInformationBanner, true),
                            if(
                              toboolean(fv!processInfo.pv.error) = false,
                              {a!save(local!flag, addseconds(now(), 10)),
                              a!save(local!criterio, null),
                              a!save(local!criterioT, null),
                              a!save(local!mostrarSuccess, true),
                              a!save(
                                local!usuarioGuardado,
                                local!usuarioNuevo.usuarioopics
                              ),
                              a!save(local!usuarioNuevo.usuarioopics, null),
                              a!save(local!usuarioNuevo.idsegmento, null),
                              a!save(ri!refreshCount, ri!refreshCount + 1)
                              },
                              a!save(local!flag_error, addseconds(now(), 10))
                            ),
                            
                          }
                        )
                      },
                      size: "SMALL",
                      disabled: {
                        if(
                          or(
                            a!isNullOrEmpty(local!usuarioNuevo.usuarioopics),
                            a!isNullOrEmpty(local!usuarioNuevo.idsegmento)
                          ),
                          true,
                          if(
                            a!isNotNullOrEmpty(
                              index(#"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(
                                usuarioOpic: index(local!usuarioNuevo, "usuarioopics", null)
                              ),"data",null)
                            ),
                            true,
                            false
                          )
                        )
                      }
                    )
                  },
                  align: "START"
                )
              },
              width: "AUTO"
            )
          }
        ),
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_richTextDisplayField"(
                  labelPosition: "COLLAPSED",
                  value: {
                    #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: concat(
                        "* El usuario, ",
                        local!usuarioNuevo.usuarioopics,
                        " ya existe en la base de datos",
                        char(10)
                      ),
                      showWhen: if(
                        a!isNotNullOrEmpty(local!usuarioNuevo.usuarioopics),
                        if(
                          a!isNotNullOrEmpty(
                            index(#"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2152641"(
                              usuarioOpic: local!usuarioNuevo.usuarioopics
                            ),"data", null)
                          ),
                          true,
                          false
                        ),
                        false
                      ),
                      color: local!colorDV
                    ),
                    #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: {
                        "* Faltan los campos de:" &amp; char(10) &amp; if(
                          isnull(local!usuarioNuevo.usuarioopics),
                          " - Usuario " &amp; char(10),
                          ""
                        ) &amp; if(
                          isnull(local!usuarioNuevo.idsegmento),
                          " - Segmento",
                          ""
                        ),
                        char(10)
                      },
                      showWhen: or(
                        a!isNullOrEmpty(local!usuarioNuevo.usuarioopics),
                        a!isNullOrEmpty(local!usuarioNuevo.idsegmento)
                      ),
                      color: local!colorDV
                    ),
                    #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: {
                        "* El usuario no puede contener espacios"
                      },
                      showWhen: length(
                        split(local!usuarioNuevo.usuarioopics, " ")
                      ) &gt; 1,
                      color: local!colorDV
                    )
                  }
                )
              }
            ),
            #"SYSTEM_SYSRULES_columnLayout"(),
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"SYSTEM_SYSRULES_cardLayout"(
                  contents: {
                    #"SYSTEM_SYSRULES_richTextDisplayField"(
                      value: {
                        #"SYSTEM_SYSRULES_richTextItem_v1"(
                          text: concat(
                            "Se ha insertado correctamente el usuario: ",
                            local!usuarioGuardado
                          ),
                          color: "ACCENT",
                          style: "STRONG"
                        )
                      },
                      align: "CENTER"
                    ),
                    #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                      buttons: {
                        #"SYSTEM_SYSRULES_ButtonWidget"(
                          label: "ACEPTAR",
                          icon: "check",
                          value: false,
                          saveInto: {
                            {local!mostrarSuccess, local!showInformationBanner},
                            a!save(local!usuarioGuardado, null)
                          },
                          size: "SMALL",
                          style: "PRIMARY"
                        )
                      },
                      align: "CENTER"
                    )
                  },
                  /*showWhen: local!mostrarSuccess,*/
                  showWhen: and(
                    local!showInformationBanner,
                    local!showWhen
                  ),
                  style: "SUCCESS",
                  showBorder: false
                )
              }
            )
          }
        ),
        #"SYSTEM_SYSRULES_columnsLayout"(
          columns: {
            /*ERROR*/
            #"SYSTEM_SYSRULES_columnLayout"(
              contents: {
                #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394317"(
                  showInformationBanner: local!showInformationBanner
                )
              },
              showWhen: and(
                local!showInformationBanner,
                local!showWhen_error
              )
            ),
          }
        ),
      }
    ),
    #"SYSTEM_SYSRULES_cardLayout"(
      contents: {
        #"SYSTEM_SYSRULES_cardLayout"(
          contents: {
            #"SYSTEM_SYSRULES_columnsLayout"(
              columns: {
                /*CORRECTO ACTUALIZAR*/
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394093"(
                      showInformationBanner: local!showInformationBanner_actualizar
                    )
                  },
                  showWhen: and(
                    local!showInformationBanner_actualizar,
                    local!showWhen_actualizar
                  )
                ),
                /*ERROR ACTUALIZAR*/
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394317"(
                      showInformationBanner: local!showInformationBanner_actualizar
                    )
                  },
                  showWhen: and(
                    local!showInformationBanner_actualizar,
                    local!showWhen_error_actualizar
                  )
                ),
                /*CORRECTO ELIMINAR*/
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394093"(
                      showInformationBanner: local!showInformationBanner_eliminar
                    )
                  },
                  showWhen: and(
                    local!showInformationBanner_eliminar,
                    local!showWhen_eliminar
                  )
                ),
                /*ERROR ELIMINAR*/
                #"SYSTEM_SYSRULES_columnLayout"(
                  contents: {
                    #"_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9394317"(
                      showInformationBanner: local!showInformationBanner_eliminar
                    )
                  },
                  showWhen: and(
                    local!showInformationBanner_eliminar,
                    local!showWhen_error_eliminar
                  )
                ),
              }
            ),
            #"SYSTEM_SYSRULES_sectionLayout_v1"(
              label: "",
              contents: {
                #"SYSTEM_SYSRULES_richTextDisplayField"(
                  labelPosition: "COLLAPSED",
                  instructions: "",
                  value: {
                    "Muestra lista de usuarios opics registrados en CDO, así como su segmento con las opciones de eliminar, modificar o agregar."
                  },
                  align: "LEFT"
                ),
                #"SYSTEM_SYSRULES_columnsLayout"(
                  columns: {
                    #"SYSTEM_SYSRULES_columnLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_textField"(
                          label: "Buscar: ",
                          labelPosition: "ADJACENT",
                          value: local!criterioT,
                          saveInto: { local!criterioT },
                          refreshAfter: "KEYPRESS",
                          validations: {}
                        )
                      },
                      width: "MEDIUM"
                    ),
                    #"SYSTEM_SYSRULES_columnLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                          buttons: {
                            #"SYSTEM_SYSRULES_ButtonWidget"(
                              label: "Buscar",
                              loadingIndicator: true,
                              icon: "search",
                              saveInto: {
                                a!save(local!criterio, local!criterioT),
                                a!save(local!editGrid, null),
                                a!save( local!startIndex,1)
                              },
                              size: "SMALL",
                              style: "DESTRUCTIVE"
                            )
                          },
                          align: "START"
                        )
                      }
                    )
                  }
                ),
                #"SYSTEM_SYSRULES_columnsLayout"(
                  columns: {
                    #"SYSTEM_SYSRULES_columnLayout"(),
                    #"SYSTEM_SYSRULES_columnLayout"(),
                    #"SYSTEM_SYSRULES_columnLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_cardLayout"(
                          contents: {
                            #"SYSTEM_SYSRULES_richTextDisplayField"(
                              value: {
                                #"SYSTEM_SYSRULES_richTextItem_v1"(
                                  text: "¿Está seguro de que desea eliminar al usuario: " &amp; local!usuarioSeleccionado.usuarioopics &amp; "?" &amp; char(10) &amp; "La acción es irrevocable",
                                  color: "NEGATIVE",
                                  style: "STRONG"
                                  
                                )
                              },
                              align: "CENTER"
                            ),
                            #"SYSTEM_SYSRULES_ButtonLayout"(
                              primaryButtons: {
                                #"SYSTEM_SYSRULES_ButtonWidget"(
                                  label: "Si, Eliminar",
                                  icon: "trash",
                                  value: false,
                                  saveInto: {
                                    #"SYSTEM_SYSRULES_startProcess"(
                                      processModel: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2244852",
                                      processParameters: {
                                        usuarioopics: local!usuarioSeleccionado,
                                        delete: true
                                      },
                                      onSuccess: {
                                        a!save(local!showInformationBanner_eliminar, true),
                                        if(
                                          toboolean(fv!processInfo.pv.error) = false,
                                          {a!save(local!flag_eliminar, addseconds(now(), 10)),
                                          a!save(local!criterio, null),
                                          a!save(local!criterioT, null),
                                          a!save(local!usuarioSeleccionado, null),
                                          a!save(ri!refreshCount, ri!refreshCount + 1)
                                          },
                                          a!save(local!flag_error_eliminar, addseconds(now(), 10))
                                        ),
                                        a!save(local!mostrarEliminar, false)
                                        /*a!save(local!criterio, null),*/
                                        /*a!save(local!criterioT, null),*/
                                        /*a!save(local!usuarioSeleccionado, null),*/
                                        /*a!save(ri!refreshCount, ri!refreshCount + 1)*/
                                      }
                                    ),
                                   
                                  },
                                  style: "DESTRUCTIVE",
                                  loadingIndicator: true
                                )
                              },
                              secondaryButtons: {
                                #"SYSTEM_SYSRULES_ButtonWidget"(
                                  label: "Cancelar",
                                  icon: "times",
                                  value: false,
                                  saveInto: {
                                    local!mostrarEliminar,
                                    a!save(local!editGrid, null),
                                    a!save(local!usuarioSeleccionado, null)
                                  },
                                  style: "SECONDARY"
                                )
                              }
                            )
                          },
                          style: "WARN",
                          showBorder: false
                        )
                      }
                    )
                  },
                  showWhen: local!mostrarEliminar
                  
                ),
                #"SYSTEM_SYSRULES_columnsLayout"(
                  columns:{
                    #"SYSTEM_SYSRULES_columnLayout"(
                      contents: {
                        #"SYSTEM_SYSRULES_ButtonArrayLayout"(
                          buttons: {
                            #"SYSTEM_SYSRULES_ButtonWidget"(
                              icon: "refresh",
                              tooltip: "Actualizar Tabla",
                              saveInto: a!save(
                                ri!refreshCount,
                                ri!refreshCount + 1
                              ),
                              size: "SMALL",
                              style: "SECONDARY",
                              loadingIndicator: true
                            )
                          },
                          align: "START"
                        )
                      },
                      width: "EXTRA_NARROW"
                    ),
                  }
                ),
                #"SYSTEM_SYSRULES_gridLayout"(
                  label: "Tabla de Usuarios",
                  labelPosition: "ABOVE",
                  emptyGridMessage: "No hay usuarios que coincidan con la búsqueda",
                  headerCells: {
                    #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "USUARIO OPIC", align: "CENTER"),
                    #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "SEGMENTO", align: "CENTER"),
                    #"SYSTEM_SYSRULES_gridLayoutHeaderCell"(label: "ACCIONES", align: "CENTER")
                  },
                  columnConfigs: {
                    #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(width: "DISTRIBUTE", weight: 1),
                    #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(width: "DISTRIBUTE", weight: 1),
                    #"SYSTEM_SYSRULES_gridLayoutColumnConfig"(width: "DISTRIBUTE", weight: 1)
                  },
                  rows: {
                    #"SYSTEM_SYSRULES_forEach"(
                      items: index(local!usuarioOpicGrid,"data", null),
                      expression: #"SYSTEM_SYSRULES_gridRowLayout"(
                        contents: {
                          #"SYSTEM_SYSRULES_textField"(
                            value: index(fv!item, "usuarioopics", null), 
                            readOnly: true,
                            align: "CENTER"
                          ),
                          #"SYSTEM_SYSRULES_dropdownField_v1"(
                            placeholder: "--- Seleccione un valor ---",
                            choiceLabels: index(local!segmentos,"data","segmento",{}),
                            choiceValues: index(local!segmentos,"data","idsegmento",{}),
                            value: local!usuariosOpicsEditar[fv!index].idsegmento, 
                            saveInto: local!usuariosOpicsEditar[fv!index].idsegmento,
                            searchDisplay: "AUTO",
                            disabled: if(
                              a!isNullOrEmpty(local!editGrid),
                              true,
                              if(local!editGrid = fv!index, false, true)
                            )
                          ),
                          #"SYSTEM_SYSRULES_richTextDisplayField"(
                            value: {
                              #"SYSTEM_SYSRULES_richTextIcon"(
                                icon: "pencil-square-o",
                                caption: "Editar",
                                link: #"SYSTEM_SYSRULES_dynamicLink"(
                                  saveInto: {
                                    a!save(local!editGrid, fv!index),
                                    a!save(local!usuarioSeleccionado, 
                                    'type!{urn:com:appian:types}cdo_usuariosopics'(
                                      idusuarioopics: index(fv!item, "idusuarioopics", null), 
                                    usuarioopics: index(fv!item, "usuarioopics", null), 
                                    idsegmento: index(fv!item, "idsegmento", null)))
                                  }
                                ),
                                linkStyle: "STANDALONE",
                                showWhen:and(a!isNullOrEmpty(local!editGrid), not(local!mostrarEliminar)),
                                color: local!colorEdit
                              ),
                              #"SYSTEM_SYSRULES_richTextIcon"(
                                icon: "pencil-square-o",
                                caption: "Descartar Cambios",
                                link: #"SYSTEM_SYSRULES_dynamicLink"(
                                  saveInto: {
                                    a!save(local!editGrid, null),
                                    a!save(local!usuariosOpicsEditar[fv!index], local!usuarioSeleccionado),
                                    a!save(ri!refreshCount, ri!refreshCount + 1)
                                  }
                                ),
                                linkStyle: "STANDALONE",
                                showWhen: if(
                                  a!isNotNullOrEmpty(local!editGrid),
                                  and(local!editGrid = fv!index, not(local!mostrarEliminar)),
                                  false
                                ),
                                color: "#222222"
                              ),
                              #"SYSTEM_SYSRULES_richTextIcon"(
                                icon: "file-invoice",
                                caption: "Actualizar",
                                link: #"SYSTEM_SYSRULES_dynamicLink"(
                                  saveInto: {
                                    #"SYSTEM_SYSRULES_startProcess"(
                                      processModel: #"_a-0000e878-569a-8000-e5e4-01ef9001ef90_2244852",
                                      processParameters: { 
                                        usuarioopics: local!usuariosOpicsEditar[fv!index], 
                                        delete: false ,
                                        accion:"actualizó"
                                      },
                                      onSuccess: {
                                        a!save(local!showInformationBanner_actualizar, true),
                                        if(
                                          toboolean(fv!processInfo.pv.error) = false,
                                          {a!save(local!flag_actualizar, addseconds(now(), 10)),
                                          a!save(local!criterio, null),
                                          a!save(local!criterioT, null),
                                          a!save(local!editGrid, null),
                                          a!save(ri!refreshCount, ri!refreshCount + 1)
                                          },
                                          a!save(local!flag_error_actualizar, addseconds(now(), 10))
                                        ),
                                        /*a!save(local!criterio, null),*/
                                        /*a!save(local!criterioT, null),*/
                                        /*a!save(local!editGrid, null),*/
                                        /*a!save(ri!refreshCount, ri!refreshCount + 1)*/
                                      }
                                    )
                                  }
                                ),
                                linkStyle: "STANDALONE",
                                showWhen: if(
                                  a!isNotNullOrEmpty(local!editGrid),
                                  and(
                                    local!editGrid = fv!index,
                                    local!usuarioSeleccionado &lt;&gt; local!usuariosOpicsEditar[fv!index],
                                    not(local!mostrarEliminar)
                                  ),
                                  false
                                ),
                                color: local!colorSave
                              ),
                              #"SYSTEM_SYSRULES_richTextIcon"(
                                icon: "times",
                                caption: "Eliminar Usuario",
                                link: #"SYSTEM_SYSRULES_dynamicLink"(
                                  value: true,
                                  saveInto: {
                                    local!mostrarEliminar,
                                    a!save(local!usuarioSeleccionado, 'type!{urn:com:appian:types}cdo_usuariosopics'(
                                      idusuarioopics: index(fv!item, "idusuarioopics", null),  usuarioopics: index(fv!item, "usuarioopics", null),  
                                    idsegmento: index(fv!item, "idsegmento", null)))
                                  }
                                ),
                                linkStyle: "STANDALONE",
                                showWhen: if(
                                  and(a!isNullOrEmpty(local!editGrid), not(local!mostrarEliminar)),
                                  true,
                                  if(
                                    a!isNotNullOrEmpty(local!editGrid),
                                    and(local!editGrid = fv!index, not(local!mostrarEliminar)),
                                    false
                                  )
                                ),
                                color: local!colorDV
                              )
                            },
                            align: "CENTER"
                          )
                        }
                      )
                    )
                  },
                  selectionSaveInto: {},
                  showWhen: true,
                  validations: {},
                  shadeAlternateRows: true
                ),
                #"SYSTEM_SYSRULES_richTextDisplayField"(
                  labelPosition: "COLLAPSED",
                  value: {
                    #"SYSTEM_SYSRULES_richTextIcon"(
                      icon: "angle-double-left",
                      link: #"SYSTEM_SYSRULES_dynamicLink"(
                        saveInto: { a!save(local!startIndex, 1) },
                        showWhen: not(local!startIndex = 1)
                      ),
                      linkStyle: "STANDALONE",
                      size: "MEDIUM_PLUS"
                    ),
                    #"SYSTEM_SYSRULES_richTextIcon"(
                      icon: "angle-left",
                      link: #"SYSTEM_SYSRULES_dynamicLink"(
                        saveInto: {
                          a!save(
                            local!startIndex,
                            tointeger(local!startIndex - 5)
                          )
                        },
                        showWhen: not(local!startIndex = 1)
                      ),
                      linkStyle: "STANDALONE",
                      size: "MEDIUM_PLUS"
                    ),
                    #"SYSTEM_SYSRULES_richTextItem_v1"(
                      text: {
                        #"SYSTEM_SYSRULES_richTextItem_v1"(
                          text: {
                            local!startIndex &amp; " - " &amp; if(
                              local!startIndex &gt; tointeger(local!usuarioOpicGrid.totalCount + 4),
                              local!usuarioOpicGrid.totalCount,
                              if(
                                local!startIndex &gt;= local!usuarioOpicGrid.totalCount,
                                local!usuarioOpicGrid.totalCount,
                                local!startIndex + 4
                              )
                            )
                          },
                          style: { "STRONG" }
                        ),
                        " de " &amp; local!usuarioOpicGrid.totalCount
                      },
                      size: "STANDARD"
                    ),
                    #"SYSTEM_SYSRULES_richTextIcon"(
                      icon: "angle-right",
                      link: #"SYSTEM_SYSRULES_dynamicLink"(
                        saveInto: {
                          a!save(
                            local!startIndex,
                            tointeger(local!startIndex + 5)
                          )
                        },
                        /*showWhen: not(*/
                          /*local!batchSize = local!usuarioOpicGrid.totalCount*/
                        /*)*/
                        showWhen: 
                          local!batchSize &lt;local!usuarioOpicGrid.totalCount
                        
                      ),
                      linkStyle: "STANDALONE",
                      size: "MEDIUM_PLUS"
                    ),
                    #"SYSTEM_SYSRULES_richTextIcon"(
                      icon: "angle-double-right",
                      link: #"SYSTEM_SYSRULES_dynamicLink"(
                        saveInto: {
                          a!save(
                            local!startIndex,
                            tointeger(
                              local!usuarioOpicGrid.totalCount - tointeger(
                                right(local!usuarioOpicGrid.totalCount)
                              ) + 1
                            )
                          )
                        },
                        /*showWhen: not(*/
                          /*local!batchSize = local!usuarioOpicGrid.totalCount*/
                        /*)*/
                        showWhen:
                          local!batchSize &lt; local!usuarioOpicGrid.totalCount
                        
                      ),
                      linkStyle: "STANDALONE",
                      size: "MEDIUM_PLUS"
                    )
                  },
                  align: "RIGHT"
                )
              },
              divider: "ABOVE"
            )
            
          },
          height: "AUTO",
          style: "NONE",
          padding: "STANDARD",
          marginBelow: "NONE",
          showBorder: false
        )
      },
      showBorder: false
    )
  }
)</definition>
        <namedTypedValue>
            <name>refreshCount</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:int">0</a:value>
                    <a:nameRef>refreshCount</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e8af-4426-8000-e5ea-01ef9001ef90_2347731"/>
        <historyInfo versionUuid="_a-0000ea3c-477e-8000-e648-01ef9001ef90_6934237"/>
        <historyInfo versionUuid="_a-0000eabf-35e2-8000-e683-01ef9001ef90_8456522"/>
        <historyInfo versionUuid="_a-0000eb09-d442-8000-e687-01ef9001ef90_8796763"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9395860"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9449984"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9465744"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9505988"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9542851"/>
        <historyInfo versionUuid="_a-0000eb53-0a0e-8000-e689-01ef9001ef90_9554787"/>
        <historyInfo versionUuid="_a-0000ec5b-dce3-8000-e69f-01ef9001ef90_10126765"/>
    </history>
</contentHaul>
